<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>和耀新加州社區 - 急售物件 | 住商不動產</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Microsoft JhengHei', Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            box-shadow: 0 0 30px rgba(0,0,0,0.1);
        }
        
        .header {
            background: linear-gradient(45deg, #2c3e50, #3498db);
            color: white;
            padding: 2rem;
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        
        .header::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="50" cy="50" r="2" fill="rgba(255,255,255,0.1)"/></svg>') repeat;
            animation: float 20s infinite linear;
        }
        
        @keyframes float {
            0% { transform: translateX(-50px) translateY(-50px); }
            100% { transform: translateX(50px) translateY(50px); }
        }
        
        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
            position: relative;
            z-index: 1;
        }
        
        .urgent-banner {
            background: #e74c3c;
            color: white;
            padding: 1rem;
            text-align: center;
            font-weight: bold;
            font-size: 1.2rem;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }
        
        .properties-section {
            padding: 3rem 2rem;
            background: #f8f9fa;
        }
        
        .properties-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 1.2rem;
            margin-top: 2rem;
        }
        
        .property-card {
            background: linear-gradient(145deg, #ffffff 0%, #f8f9fa 100%);
            border-radius: 15px;
            padding: 1.2rem;
            box-shadow: 
                0 8px 25px rgba(0,0,0,0.12),
                0 4px 12px rgba(0,0,0,0.08),
                inset 0 1px 0 rgba(255,255,255,0.8);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            border: 1px solid rgba(52, 152, 219, 0.2);
            background-clip: padding-box;
            height: fit-content;
            position: relative;
            overflow: hidden;
        }
        
        .property-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #3498db, #2980b9, #3498db);
            border-radius: 15px 15px 0 0;
        }
        
        .property-card:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: 
                0 20px 40px rgba(0,0,0,0.18),
                0 8px 20px rgba(52, 152, 219, 0.15),
                inset 0 1px 0 rgba(255,255,255,0.9);
            border-color: rgba(52, 152, 219, 0.4);
        }
        
        .property-title {
            font-size: 1.1rem;
            color: #2c3e50;
            margin-bottom: 0.6rem;
            margin-top: 0.2rem;
            border-bottom: 3px solid transparent;
            background: linear-gradient(90deg, #3498db, #2980b9) bottom/100% 3px no-repeat;
            padding-bottom: 0.4rem;
            line-height: 1.3;
            font-weight: 600;
            text-shadow: 0 1px 2px rgba(0,0,0,0.1);
        }
        
        .price-highlight {
            font-size: 1.3rem;
            color: #e74c3c;
            font-weight: bold;
            margin: 0.8rem 0;
            text-align: center;
            background: linear-gradient(145deg, #fff5f5 0%, #ffe8e8 100%);
            padding: 1rem;
            border-radius: 12px;
            border: 1px solid rgba(239, 68, 68, 0.2);
            box-shadow: 
                0 4px 12px rgba(239, 68, 68, 0.1),
                inset 0 1px 0 rgba(255, 255, 255, 0.8);
            position: relative;
            overflow: hidden;
            text-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .price-highlight::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, #ef4444, #dc2626, #ef4444);
            border-radius: 12px 12px 0 0;
        }
        
        .price-highlight span {
            font-size: 1.3rem;
        }
        
        .original-price {
            text-decoration: line-through;
            color: #7f8c8d;
            font-size: 1.2rem;
        }
        
        .features-list {
            list-style: none;
            margin: 0.8rem 0;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 0.3rem;
        }
        
        .features-list li {
            padding: 0.3rem 0;
            border-bottom: 1px solid #ecf0f1;
            position: relative;
            padding-left: 1.5rem;
            font-size: 0.85rem;
        }
        
        .features-list li::before {
            content: '✓';
            position: absolute;
            left: 0;
            color: #27ae60;
            font-weight: bold;
            font-size: 1.2rem;
        }
        
        .loan-info {
            background: linear-gradient(145deg, #27ae60 0%, #2ecc71 100%);
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 6px;
            margin: -0.2rem 0;
            text-align: center;
            box-shadow: 
                0 6px 20px rgba(39, 174, 96, 0.3),
                inset 0 1px 0 rgba(255, 255, 255, 0.2);
            position: relative;
            overflow: hidden;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .loan-info::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, #2ecc71, #27ae60, #2ecc71);
            border-radius: 6px 6px 0 0;
        }
        
        .commission-section {
            background: #34495e;
            color: white;
            padding: 2rem;
            text-align: center;
        }
        
        .commission-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
            margin-top: 1rem;
        }
        
        .commission-card {
            background: rgba(255,255,255,0.1);
            padding: 1.5rem;
            border-radius: 10px;
            backdrop-filter: blur(10px);
        }
        
        .info-section {
            padding: 2rem;
            background: white;
        }
        
        .info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin-top: 1rem;
        }
        
        .info-card {
            background: #f8f9fa;
            padding: 1.5rem;
            border-radius: 10px;
            border-left: 5px solid #3498db;
        }
        
        .contact-section {
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            color: white;
            padding: 3rem 2rem;
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        
        .contact-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="20" cy="20" r="1" fill="rgba(255,215,0,0.1)"/><circle cx="80" cy="80" r="1" fill="rgba(255,215,0,0.1)"/><circle cx="60" cy="30" r="1" fill="rgba(255,215,0,0.1)"/></svg>') repeat;
            animation: sparkle 3s infinite linear;
        }
        
        @keyframes sparkle {
            0%, 100% { opacity: 0.3; }
            50% { opacity: 0.7; }
        }
        
        .contact-button {
            background: linear-gradient(45deg, #ffd700, #ffed4e, #ffd700);
            color: #1a1a2e;
            padding: 1rem 2rem;
            border: 2px solid #ffd700;
            border-radius: 25px;
            font-size: 1.2rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
            margin: 0.5rem;
            position: relative;
            overflow: hidden;
            box-shadow: 0 4px 20px rgba(255, 215, 0, 0.3);
        }
        
        .contact-button::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, 
                transparent 30%, 
                rgba(255,255,255,0.5) 50%, 
                transparent 70%);
            transform: rotate(45deg);
            transition: all 0.6s ease;
            opacity: 0;
        }
        
        .contact-button:hover::before {
            opacity: 1;
            animation: shine 1.5s ease-in-out infinite;
        }
        
        @keyframes shine {
            0% { transform: translateX(-100%) translateY(-100%) rotate(45deg); }
            100% { transform: translateX(100%) translateY(100%) rotate(45deg); }
        }
        
        .contact-button:hover {
            transform: scale(1.05);
            box-shadow: 0 8px 30px rgba(255, 215, 0, 0.5);
            background: linear-gradient(45deg, #ffed4e, #ffd700, #ffed4e);
        }
        
        .schedule-table {
            background: white;
            border-radius: 10px;
            overflow: hidden;
            margin: 1rem 0;
        }
        
        .schedule-table table {
            width: 100%;
            border-collapse: collapse;
        }
        
        .schedule-table th,
        .schedule-table td {
            padding: 1rem;
            text-align: center;
            border-bottom: 1px solid #ecf0f1;
        }
        
        .schedule-table th {
            background: #3498db;
            color: white;
        }
        
        @media (max-width: 768px) {
            .properties-grid {
                grid-template-columns: 1fr;
            }
            
            .header h1 {
                font-size: 1.8rem;
                line-height: 1.2;
            }
            
            .header p {
                font-size: 0.9rem;
            }
            
            .urgent-banner {
                font-size: 1rem;
                padding: 0.8rem;
            }
            
            .property-card {
                padding: 1.2rem;
                margin-bottom: 1rem;
            }
            
            .property-title {
                font-size: 1.2rem;
                line-height: 1.3;
            }
            
            .price-highlight {
                font-size: 1.1rem;
                line-height: 1.3;
            }
            
            .price-highlight span {
                font-size: 1.1rem !important;
            }
            
            .features-list li {
                font-size: 0.9rem;
                padding: 0.4rem 0;
                padding-left: 1.5rem;
            }
            
            .loan-info {
                font-size: 0.85rem;
                padding: 0.4rem 0.8rem;
                margin: -0.1rem 0;
            }
            
            .loan-info .contact-button {
                font-size: 0.8rem !important;
                padding: 0.3rem 0.6rem !important;
                margin-top: 0.15rem !important;
            }
            
            .info-grid {
                grid-template-columns: 1fr;
                gap: 1rem;
            }
            
            .info-card {
                padding: 1rem;
            }
            
            .info-card h3 {
                font-size: 1.1rem;
            }
            
            .schedule-table th,
            .schedule-table td {
                padding: 0.6rem;
                font-size: 0.85rem;
            }
            
            .commission-grid {
                grid-template-columns: 1fr;
                gap: 0.8rem;
            }
            
            .commission-card {
                padding: 1rem;
            }
            
            .contact-section {
                padding: 2rem 1rem;
            }
            
            .contact-section h2 {
                font-size: 1.5rem;
            }
            
            .contact-section h3 {
                font-size: 1.2rem;
                margin-top: 1.5rem;
            }
            
            .contact-button {
                font-size: 0.85rem;
                padding: 0.6rem 0.8rem;
                margin: 0.15rem;
                white-space: nowrap;
            }
            
            .contact-section p {
                font-size: 0.9rem !important;
                line-height: 1.4;
            }
            
            .contact-section > div {
                display: flex;
                flex-wrap: wrap;
                justify-content: center;
                gap: 0.4rem;
                margin: 0.5rem 0;
            }
            
            .contact-section .contact-button {
                flex: 1 1 calc(50% - 0.2rem);
                min-width: 140px;
                max-width: 180px;
                text-align: center;
                font-size: 0.8rem;
                padding: 0.6rem 0.5rem;
                line-height: 1.2;
            }
            
            .contact-section > div:last-child {
                margin-top: 1.5rem;
            }
            
            .contact-section > div:last-child > div {
                display: grid;
                grid-template-columns: 1fr 1fr;
                gap: 0.4rem;
                text-align: center;
            }
            
            .contact-section > div:last-child > div > div {
                padding: 0.6rem;
                font-size: 0.9rem;
            }
            
            .contact-section > div:last-child > div > div > div {
                font-size: 1.5rem;
                margin-bottom: 0.2rem;
            }
            
            iframe {
                height: 250px;
                width: 100%;
                max-width: 500px;
            }
        }
        
        /* 電腦版物件卡片進一步優化 */
        @media (min-width: 1024px) {
            .properties-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 1rem;
                max-width: 800px;
                margin: 2rem auto 0;
            }
            
            .property-card {
                padding: 1rem;
            }
            
            .features-list {
                grid-template-columns: 1fr 1fr;
                gap: 0.2rem;
            }
            
            .features-list li {
                font-size: 0.8rem;
                padding: 0.25rem 0;
                padding-left: 1.3rem;
            }
        }
        
        /* 手機版特色列表改為單欄 */
        @media (max-width: 768px) {
            .features-list {
                grid-template-columns: 1fr;
            }
            
            /* 照片滾動區手機版優化 */
            .photo-item {
                width: 70px !important;
                height: 52px !important;
            }
            
            .photo-scroll {
                gap: 0.4rem !important;
            }
            
            .photo-scroll-container {
                padding: 0.3rem 0 !important;
            }
            
        }
        
        /* 平板版照片滾動區優化 */
        @media (max-width: 1024px) and (min-width: 769px) {
            .photo-item {
                width: 75px !important;
                height: 56px !important;
            }
            
            .loan-info {
                padding: 0.45rem 0.9rem;
                font-size: 0.9rem;
            }
        }
        
        /* 電腦版照片滾動區優化 */
        @media (min-width: 1025px) {
            .photo-item {
                width: 80px !important;
                height: 60px !important;
            }
        }
        
        /* 照片項目懸停效果 */
        .photo-item:hover {
            transform: translateY(-2px) !important;
            box-shadow: 0 4px 12px rgba(0,0,0,0.2) !important;
        }
        
        .photo-item img:hover {
            cursor: pointer;
            filter: brightness(1.05);
        }
        
        /* 橫向滾動條樣式 */
        .photo-scroll-container::-webkit-scrollbar {
            height: 4px;
        }
        
        .photo-scroll-container::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 2px;
        }
        
        .photo-scroll-container::-webkit-scrollbar-thumb {
            background: #c1c1c1;
            border-radius: 2px;
        }
        
        .photo-scroll-container::-webkit-scrollbar-thumb:hover {
            background: #a8a8a8;
        }
        
        /* 手機版滾動條優化 */
        @media (max-width: 768px) {
            .photo-scroll-container::-webkit-scrollbar {
                height: 3px;
            }
        }
        
        /* 照片燈箱樣式 */
        .photo-lightbox {
            display: none;
            position: fixed;
            z-index: 2000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.9);
            backdrop-filter: blur(5px);
        }
        
        .lightbox-content {
            position: relative;
            margin: 2% auto;
            padding: 0;
            width: 90%;
            max-width: 1200px;
            max-height: 90vh;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .lightbox-main-image {
            max-width: 100%;
            max-height: 70vh;
            object-fit: contain;
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
            margin-bottom: 1rem;
        }
        
        .lightbox-nav {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(255,255,255,0.9);
            border: none;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            font-size: 1.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #333;
            z-index: 10;
        }
        
        .lightbox-nav:hover {
            background: rgba(255,255,255,1);
            transform: translateY(-50%) scale(1.1);
        }
        
        .lightbox-prev {
            left: 20px;
        }
        
        .lightbox-next {
            right: 20px;
        }
        
        .lightbox-close {
            position: absolute;
            top: 20px;
            right: 30px;
            background: rgba(255,255,255,0.9);
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            font-size: 1.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #333;
            z-index: 10;
        }
        
        .lightbox-close:hover {
            background: rgba(255,255,255,1);
            transform: scale(1.1);
        }
        
        .lightbox-thumbnails {
            display: flex;
            gap: 0.5rem;
            padding: 1rem;
            background: rgba(255,255,255,0.1);
            border-radius: 10px;
            backdrop-filter: blur(10px);
            max-width: 100%;
            overflow-x: auto;
            scrollbar-width: thin;
            scrollbar-color: rgba(255,255,255,0.3) transparent;
        }
        
        .lightbox-thumbnails::-webkit-scrollbar {
            height: 6px;
        }
        
        .lightbox-thumbnails::-webkit-scrollbar-track {
            background: transparent;
        }
        
        .lightbox-thumbnails::-webkit-scrollbar-thumb {
            background: rgba(255,255,255,0.3);
            border-radius: 3px;
        }
        
        .lightbox-thumbnail {
            width: 80px;
            height: 60px;
            object-fit: cover;
            border-radius: 5px;
            cursor: pointer;
            opacity: 0.7;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }
        
        .lightbox-thumbnail:hover {
            opacity: 1;
            transform: scale(1.05);
        }
        
        .lightbox-thumbnail.active {
            opacity: 1;
            border-color: #fff;
            transform: scale(1.1);
        }
        
        .lightbox-info {
            text-align: center;
            color: white;
            margin-top: 1rem;
        }
        
        .lightbox-info h3 {
            margin: 0 0 0.5rem 0;
            font-size: 1.2rem;
        }
        
        .lightbox-info p {
            margin: 0;
            opacity: 0.8;
            font-size: 0.9rem;
        }
        
        /* 手機版燈箱優化 */
        @media (max-width: 768px) {
            .lightbox-content {
                width: 95%;
                margin: 5% auto;
            }
            
            .lightbox-main-image {
                max-height: 60vh;
            }
            
            .lightbox-nav {
                width: 40px;
                height: 40px;
                font-size: 1.2rem;
            }
            
            .lightbox-prev {
                left: 10px;
            }
            
            .lightbox-next {
                right: 10px;
            }
            
            .lightbox-close {
                top: 10px;
                right: 15px;
                width: 35px;
                height: 35px;
                font-size: 1.2rem;
            }
            
            .lightbox-thumbnails {
                gap: 0.3rem;
                padding: 0.5rem;
            }
            
            .lightbox-thumbnail {
                width: 60px;
                height: 45px;
            }
        }
        
        /* 貸款試算彈窗樣式 */
        .loan-modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
            backdrop-filter: blur(5px);
        }
        
        .loan-modal-content {
            background-color: #fefefe;
            margin: 2% auto;
            padding: 0;
            border-radius: 12px;
            width: 95%;
            max-width: 950px;
            max-height: 90vh;
            overflow: hidden;
            box-shadow: 0 15px 35px rgba(0,0,0,0.15);
            animation: modalSlideIn 0.3s ease-out;
            display: flex;
            flex-direction: column;
        }
        
        @keyframes modalSlideIn {
            from {
                opacity: 0;
                transform: translateY(-50px) scale(0.9);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }
        
        .loan-modal-header {
            background: linear-gradient(135deg, #10b981 0%, #3b82f6 100%);
            color: white;
            padding: 0.8rem 1.5rem;
            border-radius: 12px 12px 0 0;
            position: relative;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .loan-modal-title {
            font-size: 1.2rem;
            font-weight: bold;
            display: flex;
            align-items: center;
        }
        
        .loan-modal-close {
            color: white;
            font-size: 1.8rem;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.2s ease;
            line-height: 1;
            padding: 0.2rem;
        }
        
        .loan-modal-close:hover {
            transform: scale(1.1);
        }
        
        .loan-modal-body {
            padding: 1rem;
            flex: 1;
            overflow-y: auto;
            max-height: calc(90vh - 100px);
            scrollbar-width: thin;
            scrollbar-color: #10b981 #f1f5f9;
        }
        
        .loan-modal-body::-webkit-scrollbar {
            width: 6px;
        }
        
        .loan-modal-body::-webkit-scrollbar-track {
            background: #f1f5f9;
            border-radius: 3px;
        }
        
        .loan-modal-body::-webkit-scrollbar-thumb {
            background: #10b981;
            border-radius: 3px;
        }
        
        .loan-modal-body::-webkit-scrollbar-thumb:hover {
            background: #059669;
        }
        
        .loan-modal-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1.2rem;
        }
        
        .loan-input-section {
            background: #f8f9fa;
            border-radius: 6px;
            padding: 1rem;
        }
        
        .loan-result-section {
            background: #ffffff;
            border-radius: 6px;
            padding: 0.6rem;
        }
        
        .loan-input-group {
            margin-bottom: 0.6rem;
        }
        
        .loan-input-label {
            display: block;
            font-weight: 600;
            margin-bottom: 0.2rem;
            color: #374151;
            font-size: 0.8rem;
        }
        
        .loan-input {
            width: 100%;
            padding: 0.4rem;
            border: 2px solid #e5e7eb;
            border-radius: 5px;
            font-size: 0.85rem;
            transition: border-color 0.3s ease, box-shadow 0.3s ease;
        }
        
        .loan-input:focus {
            outline: none;
            border-color: #10b981;
            box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.1);
        }
        
        select.loan-input {
            background-color: white;
            background-image: url("data:image/svg+xml;charset=utf8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 4 5'%3E%3Cpath fill='%23666' d='M2 0L0 2h4zm0 5L0 3h4z'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 0.7em center;
            background-size: 0.65em auto;
            padding-right: 2.5em;
            cursor: pointer;
        }
        
        .loan-slider {
            width: 100%;
            margin: 0.4rem 0;
            -webkit-appearance: none;
            appearance: none;
            height: 4px;
            border-radius: 2px;
            background: #e5e7eb;
            outline: none;
            cursor: pointer;
        }
        
        .loan-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 16px;
            height: 16px;
            border-radius: 50%;
            background: #10b981;
            cursor: pointer;
            border: 2px solid white;
            box-shadow: 0 1px 4px rgba(0,0,0,0.15);
        }
        
        .loan-slider::-moz-range-thumb {
            width: 16px;
            height: 16px;
            border-radius: 50%;
            background: #10b981;
            cursor: pointer;
            border: 2px solid white;
            box-shadow: 0 1px 4px rgba(0,0,0,0.15);
        }
        
        .loan-slider-value {
            text-align: center;
            font-weight: bold;
            color: #10b981;
            font-size: 0.8rem;
            margin-top: 0.1rem;
        }
        
        
        .loan-result-card {
            background: white;
            border-radius: 6px;
            padding: 0.8rem;
            margin-bottom: 0.6rem;
            border-left: 3px solid #10b981;
            box-shadow: 0 2px 8px rgba(0,0,0,0.06);
        }
        
        .loan-result-title {
            font-weight: bold;
            color: #10b981;
            margin-bottom: 0.6rem;
            font-size: 0.9rem;
        }
        
        .loan-result-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 0.3rem;
            font-size: 0.8rem;
        }
        
        .loan-result-highlight {
            background: linear-gradient(135deg, #10b981, #3b82f6);
            color: white;
            border-radius: 6px;
            padding: 0.8rem;
            text-align: center;
            margin-top: 0.6rem;
        }
        
        .loan-result-highlight h3 {
            font-size: 0.9rem;
            margin-bottom: 0.3rem;
        }
        
        .loan-result-highlight .amount {
            font-size: 1.3rem;
            font-weight: bold;
        }
        
        /* 手機版優化 */
        @media (max-width: 768px) {
            .loan-modal-content {
                margin: 3% auto;
                width: 95%;
                max-width: 750px;
                max-height: 90vh;
            }
            
            .loan-modal-header {
                padding: 0.8rem 1rem;
            }
            
            .loan-modal-title {
                font-size: 1.1rem;
            }
            
            .loan-modal-body {
                padding: 1rem;
                max-height: calc(90vh - 80px);
                overflow-y: auto;
            }
            
            .loan-modal-grid {
                grid-template-columns: 1fr;
                gap: 1rem;
            }
            
            .loan-input-section {
                padding: 1rem;
            }
            
            .loan-result-section {
                padding: 0.8rem;
            }
            
            .loan-input-group {
                margin-bottom: 0.8rem;
            }
            
            .loan-result-grid {
                grid-template-columns: 1fr 1fr;
                gap: 0.2rem;
            }
            
            /* 平板版多欄布局改為單欄 */
            .loan-input-section div[style*="grid-template-columns: 1fr 1fr"] {
                display: grid !important;
                grid-template-columns: 1fr !important;
                gap: 0.8rem !important;
            }
            
            /* 平板版結果區域改為單欄 */
            .loan-result-section div[style*="grid-template-columns: 1fr 1fr"] {
                display: grid !important;
                grid-template-columns: 1fr !important;
                gap: 0.6rem !important;
            }
            
            /* 平板版內聯樣式的多欄布局改為單欄 */
            div[style*="display: grid; grid-template-columns: 1fr 1fr"] {
                display: grid !important;
                grid-template-columns: 1fr !important;
                gap: 0.6rem !important;
            }
        }
        
        @media (max-width: 480px) {
            .loan-modal-content {
                margin: 1% auto;
                width: 98%;
                max-height: 98vh;
                border-radius: 8px;
            }
            
            .loan-modal-header {
                padding: 0.5rem 0.8rem;
            }
            
            .loan-modal-title {
                font-size: 0.9rem;
            }
            
            .loan-modal-close {
                font-size: 1.5rem;
                padding: 0.1rem;
            }
            
            .loan-modal-body {
                padding: 0.6rem;
                max-height: calc(98vh - 60px);
                overflow-y: auto;
            }
            
            .loan-modal-grid {
                gap: 0.6rem;
            }
            
            .loan-input-section,
            .loan-result-section {
                padding: 0.6rem;
            }
            
            .loan-input-group {
                margin-bottom: 0.4rem;
            }
            
            .loan-input-label {
                font-size: 0.75rem;
                margin-bottom: 0.15rem;
            }
            
            .loan-input {
                padding: 0.3rem;
                font-size: 0.75rem;
            }
            
            .loan-slider {
                margin: 0.2rem 0;
                height: 4px;
            }
            
            .loan-slider-value {
                font-size: 0.7rem;
                margin-top: 0.05rem;
            }
            
            .loan-result-title {
                font-size: 0.8rem;
                margin-bottom: 0.4rem;
            }
            
            .loan-result-grid {
                grid-template-columns: 1fr 1fr;
                gap: 0.15rem;
                font-size: 0.7rem;
            }
            
            .loan-result-highlight {
                padding: 0.5rem;
                margin-top: 0.4rem;
            }
            
            .loan-result-highlight h3 {
                font-size: 0.8rem;
                margin-bottom: 0.2rem;
            }
            
            .loan-result-highlight .amount {
                font-size: 1.1rem;
            }
            
            .loan-result-highlight p {
                font-size: 0.7rem;
                margin-top: 0.2rem;
            }
            
            /* 手機版多欄布局改為單欄 */
            .loan-input-section div[style*="grid-template-columns: 1fr 1fr"] {
                display: grid !important;
                grid-template-columns: 1fr !important;
                gap: 0.6rem !important;
            }
            
            /* 手機版結果區域改為單欄 */
            .loan-result-section div[style*="grid-template-columns: 1fr 1fr"] {
                display: grid !important;
                grid-template-columns: 1fr !important;
                gap: 0.4rem !important;
            }
            
            /* 手機版內聯樣式的多欄布局改為單欄 */
            div[style*="display: grid; grid-template-columns: 1fr 1fr"] {
                display: grid !important;
                grid-template-columns: 1fr !important;
                gap: 0.4rem !important;
            }
            
            .loan-result-highlight .amount {
                font-size: 1.3rem;
            }
            
            .loan-result-card {
                padding: 0.8rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header class="header">
            <h1>🏠 和耀新加州社區</h1>
            <p>專任急售 | 同業合作歡迎 | 火力全開</p>
        </header>
        
        <div class="urgent-banner">
            ⚡ <span id="urgentCountdown">急售僅2天</span> | 全區最低價 | 斡旋優先 ⚡
        </div>
        
        <section class="properties-section">
            <h2 style="text-align: center; font-size: 2rem; color: #2c3e50; margin-bottom: 1rem;">兩件鐵炮物件</h2>
            
            <div class="properties-grid">
                <div class="property-card">
                    <h3 class="property-title">🏠 和耀新加州｜4房2廳2衛｜單車位</h3>
                    
                    <!-- 照片滾動區 -->
                    <div class="photo-scroll-container" style="margin: 0.6rem 0; overflow-x: auto; padding: 0.5rem 0;">
                        <div class="photo-scroll" style="display: flex; gap: 0.5rem; width: max-content;">
                            <div class="photo-item" onclick="openLightbox(0, 'property1')" style="flex-shrink: 0; width: 80px; height: 60px; border-radius: 4px; overflow: hidden; cursor: pointer; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                                <img src="images/property1/客廳.jpg" alt="客廳" style="width: 100%; height: 100%; object-fit: cover;">
                            </div>
                            <div class="photo-item" onclick="openLightbox(1, 'property1')" style="flex-shrink: 0; width: 80px; height: 60px; border-radius: 4px; overflow: hidden; cursor: pointer; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                                <img src="images/property1/廚房.jpg" alt="廚房" style="width: 100%; height: 100%; object-fit: cover;">
                            </div>
                            <div class="photo-item" onclick="openLightbox(2, 'property1')" style="flex-shrink: 0; width: 80px; height: 60px; border-radius: 4px; overflow: hidden; cursor: pointer; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                                <img src="images/property1/主臥房視角.jpg" alt="主臥房視角" style="width: 100%; height: 100%; object-fit: cover;">
                            </div>
                            <div class="photo-item" onclick="openLightbox(3, 'property1')" style="flex-shrink: 0; width: 80px; height: 60px; border-radius: 4px; overflow: hidden; cursor: pointer; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                                <img src="images/property1/主臥房視角2.jpg" alt="主臥房視角2" style="width: 100%; height: 100%; object-fit: cover;">
                            </div>
                            <div class="photo-item" onclick="openLightbox(4, 'property1')" style="flex-shrink: 0; width: 80px; height: 60px; border-radius: 4px; overflow: hidden; cursor: pointer; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                                <img src="images/property1/次臥房.jpg" alt="次臥房" style="width: 100%; height: 100%; object-fit: cover;">
                            </div>
                            <div class="photo-item" onclick="openLightbox(5, 'property1')" style="flex-shrink: 0; width: 80px; height: 60px; border-radius: 4px; overflow: hidden; cursor: pointer; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                                <img src="images/property1/次臥房3.jpg" alt="次臥房3" style="width: 100%; height: 100%; object-fit: cover;">
                            </div>
                            <div class="photo-item" onclick="openLightbox(6, 'property1')" style="flex-shrink: 0; width: 80px; height: 60px; border-radius: 4px; overflow: hidden; cursor: pointer; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                                <img src="images/property1/次臥房4.jpg" alt="次臥房4" style="width: 100%; height: 100%; object-fit: cover;">
                            </div>
                            <div class="photo-item" onclick="openLightbox(7, 'property1')" style="flex-shrink: 0; width: 80px; height: 60px; border-radius: 4px; overflow: hidden; cursor: pointer; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                                <img src="images/property1/衛浴.jpg" alt="衛浴" style="width: 100%; height: 100%; object-fit: cover;">
                            </div>
                            <div class="photo-item" onclick="openLightbox(8, 'property1')" style="flex-shrink: 0; width: 80px; height: 60px; border-radius: 4px; overflow: hidden; cursor: pointer; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                                <img src="images/property1/前陽台.jpg" alt="前陽台" style="width: 100%; height: 100%; object-fit: cover;">
                            </div>
                            <div class="photo-item" onclick="openLightbox(9, 'property1')" style="flex-shrink: 0; width: 80px; height: 60px; border-radius: 4px; overflow: hidden; cursor: pointer; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                                <img src="images/property1/前陽台景觀.jpg" alt="前陽台景觀" style="width: 100%; height: 100%; object-fit: cover;">
                            </div>
                            <div class="photo-item" onclick="openLightbox(10, 'property1')" style="flex-shrink: 0; width: 80px; height: 60px; border-radius: 4px; overflow: hidden; cursor: pointer; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                                <img src="images/property1/後陽台.jpg" alt="後陽台" style="width: 100%; height: 100%; object-fit: cover;">
                            </div>
                            <div class="photo-item" onclick="openLightbox(11, 'property1')" style="flex-shrink: 0; width: 80px; height: 60px; border-radius: 4px; overflow: hidden; cursor: pointer; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                                <img src="images/property1/陽台景觀.jpg" alt="陽台景觀" style="width: 100%; height: 100%; object-fit: cover;">
                            </div>
                            <div class="photo-item" onclick="openLightbox(12, 'property1')" style="flex-shrink: 0; width: 80px; height: 60px; border-radius: 4px; overflow: hidden; cursor: pointer; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                                <img src="images/property1/格局圖.jpg" alt="格局圖" style="width: 100%; height: 100%; object-fit: cover;">
                            </div>
                        </div>
                    </div>
                    
                    <div style="background: #f8f9fa; padding: 0.6rem; border-radius: 6px; margin: 0.6rem 0; font-size: 0.8rem;">
                        <strong>📍 地址：</strong>楊梅區新農街二段233號<br>
                        <strong>🏢 社區：</strong>全新落成正四房+車位 (和耀新加州)
                    </div>
                    <div class="price-highlight">
                        售價：1,398萬
                    </div>
                    <ul class="features-list">
                        <li>4房2廳2衛格局</li>
                        <li>衛浴雙開窗設計</li>
                        <li>平面單車位</li>
                        <li>總坪數50.29坪 (建物24.91坪 / 土地持分7.89坪)</li>
                        <li>樓層待確認 / 總樓層12樓</li>
                        <li>屋齡不到1年 (2024.12.19完工)</li>
                        <li>大廈管理</li>
                        <li>座南朝北 / 有電梯</li>
                    </ul>
                    <div class="loan-info">
                        💰 可貸款額度：1,150萬 - 1,210萬
                        <div style="font-size: 0.6rem; color: #e74c3c; margin-top: 0.05rem; font-weight: bold;">以上為銀行初估實際依個人條件為主</div>
                        <a href="javascript:void(0)" onclick="openLoanModal()" class="contact-button" style="font-size: 0.9rem; padding: 0.4rem 0.8rem; margin-top: 0.2rem; display: inline-block;">
                            🧮 貸款試算
                        </a>
                    </div>
                    <div style="background: #e8f5e8; padding: 0.6rem; border-radius: 6px; margin-top: 0.6rem;">
                        <h4 style="color: #27ae60; margin-bottom: 0.3rem; font-size: 0.85rem;">🌟 生活機能</h4>
                        <p style="font-size: 0.75rem; margin: 0;">
                            <strong>學校：</strong>楊明國中、楊明國小、楊梅國小<br>
                            <strong>交通：</strong>台1線、楊梅交流道、五楊交流道、楊梅區免費公車、楊梅火車站<br>
                            <strong>公園：</strong>楊梅市場、頭重溪公園
                        </p>
                    </div>
                </div>
                
                <div class="property-card">
                    <h3 class="property-title">🏠 和耀新加州｜4房2廳2衛｜雙車位</h3>
                    
                    <!-- 照片滾動區 -->
                    <div class="photo-scroll-container" style="margin: 0.6rem 0; overflow-x: auto; padding: 0.5rem 0;">
                        <div class="photo-scroll" style="display: flex; gap: 0.5rem; width: max-content;">
                            <div class="photo-item" onclick="openLightbox(0, 'property2')" style="flex-shrink: 0; width: 80px; height: 60px; border-radius: 4px; overflow: hidden; cursor: pointer; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                                <img src="images/property2/客廳全景.jpg" alt="客廳全景" style="width: 100%; height: 100%; object-fit: cover;">
                            </div>
                            <div class="photo-item" onclick="openLightbox(1, 'property2')" style="flex-shrink: 0; width: 80px; height: 60px; border-radius: 4px; overflow: hidden; cursor: pointer; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                                <img src="images/property2/客廳細節.jpg" alt="客廳細節" style="width: 100%; height: 100%; object-fit: cover;">
                            </div>
                            <div class="photo-item" onclick="openLightbox(2, 'property2')" style="flex-shrink: 0; width: 80px; height: 60px; border-radius: 4px; overflow: hidden; cursor: pointer; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                                <img src="images/property2/客廳角度二.jpg" alt="客廳角度二" style="width: 100%; height: 100%; object-fit: cover;">
                            </div>
                            <div class="photo-item" onclick="openLightbox(3, 'property2')" style="flex-shrink: 0; width: 80px; height: 60px; border-radius: 4px; overflow: hidden; cursor: pointer; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                                <img src="images/property2/廚房.jpg" alt="廚房" style="width: 100%; height: 100%; object-fit: cover;">
                            </div>
                            <div class="photo-item" onclick="openLightbox(4, 'property2')" style="flex-shrink: 0; width: 80px; height: 60px; border-radius: 4px; overflow: hidden; cursor: pointer; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                                <img src="images/property2/主臥室.jpg" alt="主臥室" style="width: 100%; height: 100%; object-fit: cover;">
                            </div>
                            <div class="photo-item" onclick="openLightbox(5, 'property2')" style="flex-shrink: 0; width: 80px; height: 60px; border-radius: 4px; overflow: hidden; cursor: pointer; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                                <img src="images/property2/次臥室.jpg" alt="次臥室" style="width: 100%; height: 100%; object-fit: cover;">
                            </div>
                            <div class="photo-item" onclick="openLightbox(6, 'property2')" style="flex-shrink: 0; width: 80px; height: 60px; border-radius: 4px; overflow: hidden; cursor: pointer; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                                <img src="images/property2/次臥房3.jpg" alt="次臥房3" style="width: 100%; height: 100%; object-fit: cover;">
                            </div>
                            <div class="photo-item" onclick="openLightbox(7, 'property2')" style="flex-shrink: 0; width: 80px; height: 60px; border-radius: 4px; overflow: hidden; cursor: pointer; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                                <img src="images/property2/次臥房4.jpg" alt="次臥房4" style="width: 100%; height: 100%; object-fit: cover;">
                            </div>
                            <div class="photo-item" onclick="openLightbox(8, 'property2')" style="flex-shrink: 0; width: 80px; height: 60px; border-radius: 4px; overflow: hidden; cursor: pointer; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                                <img src="images/property2/臥室細節.jpg" alt="臥室細節" style="width: 100%; height: 100%; object-fit: cover;">
                            </div>
                            <div class="photo-item" onclick="openLightbox(9, 'property2')" style="flex-shrink: 0; width: 80px; height: 60px; border-radius: 4px; overflow: hidden; cursor: pointer; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                                <img src="images/property2/衛浴開窗.jpg" alt="衛浴開窗" style="width: 100%; height: 100%; object-fit: cover;">
                            </div>
                            <div class="photo-item" onclick="openLightbox(10, 'property2')" style="flex-shrink: 0; width: 80px; height: 60px; border-radius: 4px; overflow: hidden; cursor: pointer; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                                <img src="images/property2/主臥衛浴開窗.jpg" alt="主臥衛浴開窗" style="width: 100%; height: 100%; object-fit: cover;">
                            </div>
                            <div class="photo-item" onclick="openLightbox(11, 'property2')" style="flex-shrink: 0; width: 80px; height: 60px; border-radius: 4px; overflow: hidden; cursor: pointer; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                                <img src="images/property2/後陽台.jpg" alt="後陽台" style="width: 100%; height: 100%; object-fit: cover;">
                            </div>
                            <div class="photo-item" onclick="openLightbox(12, 'property2')" style="flex-shrink: 0; width: 80px; height: 60px; border-radius: 4px; overflow: hidden; cursor: pointer; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                                <img src="images/property2/陽台景觀.jpg" alt="陽台景觀" style="width: 100%; height: 100%; object-fit: cover;">
                            </div>
                            <div class="photo-item" onclick="openLightbox(13, 'property2')" style="flex-shrink: 0; width: 80px; height: 60px; border-radius: 4px; overflow: hidden; cursor: pointer; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                                <img src="images/property2/格局圖.jpg" alt="格局圖" style="width: 100%; height: 100%; object-fit: cover;">
                            </div>
                        </div>
                    </div>
                    
                    <div style="background: #f8f9fa; padding: 0.6rem; border-radius: 6px; margin: 0.6rem 0; font-size: 0.8rem;">
                        <strong>📍 地址：</strong>楊梅區新農街二段233號3樓<br>
                        <strong>🏢 社區：</strong>全新落成正四房+車位 (和耀新加州)
                    </div>
                    <div class="price-highlight">
                        售價：1,568萬
                    </div>
                    <ul class="features-list">
                        <li>4房2廳2衛格局</li>
                        <li>衛浴雙開窗設計</li>
                        <li>平面雙車位</li>
                        <li>總坪數50.29坪 (建物24.91坪 / 土地持分7.89坪)</li>
                        <li>3樓 / 總樓層12樓</li>
                        <li>屋齡不到1年 (2024.12.19完工)</li>
                        <li>大廈管理</li>
                        <li>座南朝北 / 有電梯</li>
                    </ul>
                    <div class="loan-info">
                        💰 可貸款額度：1,184萬 - 1,258萬
                        <div style="font-size: 0.6rem; color: #e74c3c; margin-top: 0.05rem; font-weight: bold;">以上為銀行初估實際依個人條件為主</div>
                        <a href="javascript:void(0)" onclick="openLoanModal1568()" class="contact-button" style="font-size: 0.9rem; padding: 0.4rem 0.8rem; margin-top: 0.2rem; display: inline-block;">
                            🧮 貸款試算
                        </a>
                    </div>
                    <div style="background: #e8f5e8; padding: 0.6rem; border-radius: 6px; margin-top: 0.6rem;">
                        <h4 style="color: #27ae60; margin-bottom: 0.3rem; font-size: 0.85rem;">🌟 生活機能</h4>
                        <p style="font-size: 0.75rem; margin: 0;">
                            <strong>學校：</strong>楊明國中、楊明國小、楊梅國小<br>
                            <strong>交通：</strong>台1線、楊梅交流道、五楊交流道、楊梅區免費公車、楊梅火車站<br>
                            <strong>公園：</strong>楊梅市場、頭重溪公園
                        </p>
                    </div>
                </div>
            </div>
        </section>
        
        
        <section style="background: #f8f9fa; padding: 2rem; text-align: center;">
            <h2 style="color: #2c3e50; margin-bottom: 1rem;">📍 物件位置</h2>
            <p style="color: #7f8c8d; margin-bottom: 1.5rem;">楊梅區新農街二段233號 - 和耀新加州社區</p>
            <div style="display: flex; justify-content: center; margin: 2rem 0;">
                <iframe src="https://www.google.com/maps/embed?pb=!4v1758340007781!6m8!1m7!1s7w1_fK5tL3RYWBpCpBwAwg!2m2!1d24.91222143626028!2d121.1724532961861!3f327.007695552005!4f17.133051009828563!5f0.7820865974627469" width="600" height="450" style="border:0; border-radius: 15px; box-shadow: 0 10px 30px rgba(0,0,0,0.1);" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
            </div>
        </section>
        
        <!-- 相關資料連結 -->
        <section style="background: #ffffff; padding: 2rem; text-align: center;">
            <h3>📎 相關資料連結</h3>
            <div style="display: flex; flex-wrap: wrap; justify-content: center; gap: 0.4rem; margin: 0.5rem 0;">
                <a href="https://reurl.cc/Y35qeD" class="contact-button" target="_blank">實價登錄(1398萬)</a>
                <a href="https://reurl.cc/yAbv7D" class="contact-button" target="_blank">實價登錄(1568萬)</a>
            </div>
            <div style="display: flex; flex-wrap: wrap; justify-content: center; gap: 0.4rem; margin: 0.5rem 0;">
                <a href="https://reurl.cc/0Wbd1l" class="contact-button" target="_blank">社區報告</a>
                <a href="https://reurl.cc/gYb6Db" class="contact-button" target="_blank">楊梅房市概況</a>
            </div>
        </section>
        
        <section class="info-section">
            <h2 style="text-align: center; margin-bottom: 2rem; color: #2c3e50;">📋 重要資訊</h2>
            
            <div class="info-grid">
                
                <div class="info-card">
                    <h3>⏰ 屋主簽約時間</h3>
                    <div class="schedule-table">
                        <table>
                            <tr><th>星期</th><th>時間</th></tr>
                            <tr><td>一、二、四</td><td>17:30後</td></tr>
                            <tr><td>三</td><td>全天</td></tr>
                            <tr><td>六</td><td>下午</td></tr>
                        </table>
                    </div>
                    <p><small>屋主可配合簽約時間</small></p>
                </div>
                
                <div class="info-card">
                    <h3>💡 出售原因 & 重要提醒</h3>
                    <p><strong>出售原因：</strong><br>
                    當初購買自住，因建商交期延遲，屋主已另購置他處定居了，現釋出兩間物件。因資金需求，以不虧損為底線出售。目前自住處己有買方想購買，不想搬家為由，才低價出售楊梅。若無售出，就搬回楊梅。</p>
                    
                    <p style="margin-top: 1rem;"><strong>⚠️ 重要提醒：</strong><br>
                    • 斡旋為優先順位<br>
                    • 需確認自備足夠<br>
                    • 不壓保貸<br>
                    • 賠錢就不賣，有自住買方</p>
                </div>
            </div>
        </section>
        
            
            
        </section>
    </div>
    
    <!-- 照片燈箱 -->
    <div id="photoLightbox" class="photo-lightbox">
        <div class="lightbox-content">
            <button class="lightbox-close" onclick="closeLightbox()">&times;</button>
            <button class="lightbox-nav lightbox-prev" onclick="previousImage()">‹</button>
            <button class="lightbox-nav lightbox-next" onclick="nextImage()">›</button>
            
            <img id="lightboxMainImage" class="lightbox-main-image" src="" alt="">
            
            <div class="lightbox-thumbnails" id="lightboxThumbnails">
                <!-- 縮圖會由JavaScript動態生成 -->
            </div>
            
            <div class="lightbox-info">
                <h3 id="lightboxTitle"></h3>
                <p id="lightboxCounter"></p>
            </div>
        </div>
    </div>
    
    <!-- 貸款試算彈窗 -->
    <div id="loanModal" class="loan-modal">
        <div class="loan-modal-content">
            <div class="loan-modal-header">
                <div class="loan-modal-title">
                    <span class="text-2xl mr-3">🧮</span>
                    買方費用估算
                </div>
                <span class="loan-modal-close" onclick="closeLoanModal()">&times;</span>
            </div>
            <div class="loan-modal-body">
                <div class="loan-modal-grid">
                    <!-- 輸入區域 -->
                    <div class="loan-input-section">
                        <h3 style="color: #10b981; font-weight: bold; margin-bottom: 0.8rem; font-size: 0.9rem;">📝 輸入參數</h3>
                        
                        <div class="loan-input-group">
                            <label class="loan-input-label">房屋總價 (萬元)</label>
                            <input type="number" id="modalHousePrice" class="loan-input" placeholder="例如：1398" value="1398">
                        </div>
                        
                        <div class="loan-input-group">
                            <label class="loan-input-label">貸款成數 (%)</label>
                            <input type="range" id="modalLoanRatio" min="40" max="85" value="80" class="loan-slider">
                            <div class="loan-slider-value" id="modalLoanRatioValue">80%</div>
                        </div>
                        
                        <div class="loan-input-group">
                            <label class="loan-input-label">貸款年限 (年)</label>
                            <input type="range" id="modalLoanYears" min="0" max="40" value="40" class="loan-slider">
                            <div class="loan-slider-value" id="modalLoanYearsValue">40年</div>
                        </div>
                        
                        <div class="loan-input-group">
                            <label class="loan-input-label">貸款利率 (%)</label>
                            <input type="range" id="modalInterestRate" min="0.5" max="5" step="0.1" value="2.1" class="loan-slider">
                            <div class="loan-slider-value" id="modalInterestRateValue">2.1%</div>
                        </div>
                        
                        <div class="loan-input-group">
                            <label class="loan-input-label">名下有無其他房貸</label>
                            <select id="modalExistingLoan" class="loan-input" onchange="adjustLoanConditions()">
                                <option value="none">無其他房貸 (首購)</option>
                                <option value="existing">有其他房貸 (第二戶)</option>
                                <option value="youth">新青安貸款 (限1000萬)</option>
                            </select>
                        </div>
                        
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 0.8rem; margin-bottom: 0.8rem;">
                            <div class="loan-input-group">
                                <label class="loan-input-label">寬限期 (年)</label>
                                <select id="modalGracePeriod" class="loan-input">
                                    <option value="0">無寬限期</option>
                                    <option value="1">1年</option>
                                    <option value="2">2年</option>
                                    <option value="3">3年</option>
                                    <option value="5" selected>新青安 5年</option>
                                </select>
                            </div>
                            
                            <div class="loan-input-group">
                                <label class="loan-input-label">還款方式</label>
                                <select id="modalRepaymentType" class="loan-input">
                                    <option value="equal_payment">等額本息</option>
                                    <option value="equal_principal">等額本金</option>
                                </select>
                            </div>
                        </div>
                        
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 0.8rem; margin-bottom: 0.8rem;">
                            <div class="loan-input-group">
                                <label class="loan-input-label">代書費+契稅 (元)</label>
                                <input type="number" id="modalServiceFee" class="loan-input" placeholder="100000" value="100000">
                            </div>
                            
                            <div class="loan-input-group">
                                <label class="loan-input-label">代書潤筆費 (元)</label>
                                <input type="number" id="modalNotaryFee" class="loan-input" placeholder="2000" value="2000">
                            </div>
                        </div>
                        
                        <div class="loan-input-group">
                            <label class="loan-input-label">仲介費 (%)</label>
                            <input type="range" id="modalAgentFee" min="0" max="2" step="0.1" value="2" class="loan-slider">
                            <div class="loan-slider-value" id="modalAgentFeeValue">2%</div>
                        </div>
                        
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 0.8rem; margin-bottom: 0.8rem;">
                            <div class="loan-input-group">
                                <label class="loan-input-label">月收入 (萬元)</label>
                                <input type="number" id="modalMonthlyIncome" class="loan-input" placeholder="例如：8" value="8">
                            </div>
                            
                            <div class="loan-input-group">
                                <label class="loan-input-label">其他月支出 (萬元)</label>
                                <input type="number" id="modalOtherExpenses" class="loan-input" placeholder="例如：2" value="2">
                            </div>
                        </div>
                        
                        <div class="loan-input-group">
                            <div style="text-align: center; color: #10b981; font-size: 0.8rem; font-weight: 500;">
                                💡 所有參數即時計算，無需點擊按鈕
                            </div>
                        </div>
                    </div>
                    
                    <!-- 結果區域 -->
                    <div class="loan-result-section">
                        <h3 style="color: #10b981; font-weight: bold; margin-bottom: 0.8rem; font-size: 0.9rem;">📊 計算結果</h3>
                        <div id="modalLoanResults">
                            <div class="text-center text-gray-500 py-4">
                                <div class="text-2xl mb-1">📊</div>
                                <p class="text-xs">請輸入房屋價格開始計算</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        // 添加一些互動效果
        document.addEventListener('DOMContentLoaded', function() {
            // 滾動動畫效果
            const cards = document.querySelectorAll('.property-card, .info-card');
            
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.style.opacity = '1';
                        entry.target.style.transform = 'translateY(0)';
                    }
                });
            });
            
            cards.forEach(card => {
                card.style.opacity = '0';
                card.style.transform = 'translateY(30px)';
                card.style.transition = 'opacity 0.6s ease, transform 0.6s ease';
                observer.observe(card);
            });
            
            // 點擊按鈕效果
            const buttons = document.querySelectorAll('.contact-button');
            buttons.forEach(button => {
                button.addEventListener('click', function() {
                    this.style.transform = 'scale(0.95)';
                    setTimeout(() => {
                        this.style.transform = 'scale(1.05)';
                    }, 100);
                });
            });
        });
        
        // 貸款試算彈窗功能
        function openLoanModal(propertyPrice = 1398, monthlyIncome = 8) {
            try {
                console.log('開啟貸款試算彈窗');
                document.getElementById('loanModal').style.display = 'block';
                document.body.style.overflow = 'hidden'; // 防止背景滾動
                
                // 設置預設值
                document.getElementById('modalHousePrice').value = propertyPrice;
                document.getElementById('modalMonthlyIncome').value = monthlyIncome;
                
                // 重新綁定滑桿事件
                setTimeout(() => {
                    bindSliderEvents();
                    bindInputEvents(); // 綁定輸入框事件
                    calculateModalLoan(); // 立即計算一次顯示結果
                }, 100);
            } catch (error) {
                console.error('彈窗開啟錯誤:', error);
                alert('彈窗開啟失敗，請檢查控制台錯誤訊息');
            }
        }
        
        // 第二個房產的貸款試算
        function openLoanModal1568() {
            openLoanModal(1568, 15);
        }
        
        function closeLoanModal() {
            document.getElementById('loanModal').style.display = 'none';
            document.body.style.overflow = 'auto'; // 恢復背景滾動
        }
        
        // 點擊彈窗外部關閉
        window.onclick = function(event) {
            const modal = document.getElementById('loanModal');
            if (event.target === modal) {
                closeLoanModal();
            }
        }
        
        // 滑桿值更新 - 確保在DOM載入後綁定
        function bindSliderEvents() {
            const loanRatioSlider = document.getElementById('modalLoanRatio');
            const loanYearsSlider = document.getElementById('modalLoanYears');
            const interestRateSlider = document.getElementById('modalInterestRate');
            
            if (loanRatioSlider) {
                loanRatioSlider.addEventListener('input', function() {
                    document.getElementById('modalLoanRatioValue').textContent = this.value + '%';
                    calculateModalLoan(); // 即時計算
                    // 如果是新青安貸款，重新檢查是否需要顯示一般貸款利率設定
                    if (document.getElementById('modalExistingLoan').value === 'youth') {
                        showYouthLoanNotice();
                    }
                });
                loanRatioSlider.addEventListener('change', function() {
                    document.getElementById('modalLoanRatioValue').textContent = this.value + '%';
                    calculateModalLoan(); // 即時計算
                    // 如果是新青安貸款，重新檢查是否需要顯示一般貸款利率設定
                    if (document.getElementById('modalExistingLoan').value === 'youth') {
                        showYouthLoanNotice();
                    }
                });
            }
            
            if (loanYearsSlider) {
                loanYearsSlider.addEventListener('input', function() {
                    document.getElementById('modalLoanYearsValue').textContent = this.value + '年';
                    calculateModalLoan(); // 即時計算
                });
                loanYearsSlider.addEventListener('change', function() {
                    document.getElementById('modalLoanYearsValue').textContent = this.value + '年';
                    calculateModalLoan(); // 即時計算
                });
            }
            
            if (interestRateSlider) {
                interestRateSlider.addEventListener('input', function() {
                    document.getElementById('modalInterestRateValue').textContent = this.value + '%';
                    calculateModalLoan(); // 即時計算
                });
                interestRateSlider.addEventListener('change', function() {
                    document.getElementById('modalInterestRateValue').textContent = this.value + '%';
                    calculateModalLoan(); // 即時計算
                });
            }
        }
        
        // 驗證計算準確性的測試函數
        function validateLoanCalculation() {
            // 測試案例1：無寬限期，標準計算
            console.log("=== 貸款計算驗證測試 ===");
            
            // 測試數據
            const testCases = [
                {
                    name: "標準案例：無寬限期",
                    housePrice: 1500, // 萬元
                    loanRatio: 80,    // %
                    loanYears: 20,    // 年
                    interestRate: 2.1, // %
                    gracePeriod: 0,   // 年
                    expectedMonthlyPayment: 7628, // 預期月付約7628元
                },
                {
                    name: "寬限期案例：3年寬限期",
                    housePrice: 1500,
                    loanRatio: 80,
                    loanYears: 20,
                    interestRate: 2.1,
                    gracePeriod: 3,
                    expectedGracePayment: 2100, // 預期寬限期月付約2100元
                },
                {
                    name: "新青安案例：5年寬限期",
                    housePrice: 1500,
                    loanRatio: 80,
                    loanYears: 30,
                    interestRate: 2.1,
                    gracePeriod: 5,
                    expectedGracePayment: 2100, // 預期寬限期月付約2100元
                }
            ];
            
            testCases.forEach(testCase => {
                console.log(`\n測試：${testCase.name}`);
                
                // 設置測試數據
                document.getElementById('modalHousePrice').value = testCase.housePrice;
                document.getElementById('modalLoanRatio').value = testCase.loanRatio;
                document.getElementById('modalLoanYears').value = testCase.loanYears;
                document.getElementById('modalInterestRate').value = testCase.interestRate;
                document.getElementById('modalGracePeriod').value = testCase.gracePeriod;
                
                // 執行計算
                calculateModalLoan();
                
                console.log("測試完成，請檢查結果是否合理");
            });
        }
        
        // 根據貸款狀況調整貸款條件
        function adjustLoanConditions() {
            const existingLoan = document.getElementById('modalExistingLoan').value;
            const loanRatioSlider = document.getElementById('modalLoanRatio');
            const gracePeriodSelect = document.getElementById('modalGracePeriod');
            const interestRateSlider = document.getElementById('modalInterestRate');
            
            if (existingLoan === 'existing') {
                // 第二戶貸款：限制貸款成數50%，取消寬限期
                loanRatioSlider.max = 50;
                loanRatioSlider.value = Math.min(loanRatioSlider.value, 50);
                document.getElementById('modalLoanRatioValue').textContent = loanRatioSlider.value + '%';
                
                gracePeriodSelect.value = '0'; // 強制設為無寬限期
                
                // 恢復一般利率範圍
                interestRateSlider.min = 1.5;
                interestRateSlider.max = 5;
                interestRateSlider.value = Math.max(interestRateSlider.value, 1.5);
                document.getElementById('modalInterestRateValue').textContent = interestRateSlider.value + '%';
                
                // 顯示政策提醒
                showPolicyNotice('第二戶房貸限制：貸款成數最高50%，無寬限期');
                
            } else if (existingLoan === 'youth') {
                // 新青安貸款：限制1000萬額度，優惠利率，5年寬限期
                loanRatioSlider.max = 80;
                loanRatioSlider.value = Math.min(loanRatioSlider.value, 80);
                document.getElementById('modalLoanRatioValue').textContent = loanRatioSlider.value + '%';
                
                gracePeriodSelect.value = '5'; // 強制設為新青安5年寬限期
                
                // 設置新青安優惠利率範圍 (基準利率+0.555%-政府補貼2碼)
                interestRateSlider.min = 1.2;
                interestRateSlider.max = 2.0;
                interestRateSlider.value = 1.8; // 預設新青安優惠利率
                document.getElementById('modalInterestRateValue').textContent = interestRateSlider.value + '%';
                
                // 顯示新青安政策提醒和一般貸款利率設定
                showYouthLoanNotice();
                
            } else {
                // 首購：恢復正常條件
                loanRatioSlider.max = 85;
                loanRatioSlider.value = Math.min(loanRatioSlider.value, 85);
                document.getElementById('modalLoanRatioValue').textContent = loanRatioSlider.value + '%';
                
                gracePeriodSelect.value = '5'; // 恢復新青安5年寬限期
                
                // 恢復一般利率範圍
                interestRateSlider.min = 1.5;
                interestRateSlider.max = 5;
                interestRateSlider.value = Math.max(interestRateSlider.value, 1.5);
                document.getElementById('modalInterestRateValue').textContent = interestRateSlider.value + '%';
                
                // 隱藏政策提醒
                hidePolicyNotice();
            }
            
            // 重新計算
            calculateModalLoan();
        }
        
        // 顯示政策提醒
        function showPolicyNotice(message) {
            let notice = document.getElementById('policyNotice');
            if (!notice) {
                notice = document.createElement('div');
                notice.id = 'policyNotice';
                notice.style.cssText = `
                    background: linear-gradient(135deg, #fef3c7, #fde68a);
                    border: 1px solid #f59e0b;
                    border-radius: 6px;
                    padding: 0.6rem;
                    margin: 0.6rem 0;
                    font-size: 0.8rem;
                    color: #92400e;
                    text-align: center;
                    animation: fadeIn 0.3s ease-in;
                `;
                
                // 插入到寬限期選擇框之後
                const gracePeriodGroup = document.querySelector('#modalGracePeriod').closest('div[style*="grid-template-columns"]');
                gracePeriodGroup.parentNode.insertBefore(notice, gracePeriodGroup.nextSibling);
            }
            notice.textContent = '⚠️ ' + message;
            notice.style.display = 'block';
        }
        
        // 隱藏政策提醒
        function hidePolicyNotice() {
            const notice = document.getElementById('policyNotice');
            if (notice) {
                notice.style.display = 'none';
            }
            // 同時隱藏新青安一般貸款利率設定
            const youthRateSetting = document.getElementById('youthNormalRateSetting');
            if (youthRateSetting) {
                youthRateSetting.style.display = 'none';
            }
        }
        
        // 顯示新青安貸款提醒和一般貸款利率設定
        function showYouthLoanNotice() {
            showPolicyNotice('新青安貸款：前1000萬享優惠利率1.8%，超過部分適用一般利率，優惠至2026/7/31');
            
            // 創建或顯示一般貸款利率設定區域
            let youthRateSetting = document.getElementById('youthNormalRateSetting');
            if (!youthRateSetting) {
                youthRateSetting = document.createElement('div');
                youthRateSetting.id = 'youthNormalRateSetting';
                youthRateSetting.style.cssText = `
                    background: linear-gradient(135deg, #e3f2fd, #bbdefb);
                    border: 1px solid #2196f3;
                    border-radius: 6px;
                    padding: 0.8rem;
                    margin: 0.6rem 0;
                    font-size: 0.85rem;
                    color: #0d47a1;
                    animation: fadeIn 0.3s ease-in;
                `;
                
                // 插入到政策提醒之後
                const policyNotice = document.getElementById('policyNotice');
                if (policyNotice) {
                    policyNotice.parentNode.insertBefore(youthRateSetting, policyNotice.nextSibling);
                }
            }
            
            // 獲取當前房屋總價和貸款成數來計算是否會超過1000萬
            const housePrice = parseFloat(document.getElementById('modalHousePrice').value) * 10000;
            const loanRatio = parseFloat(document.getElementById('modalLoanRatio').value) / 100;
            const totalLoanAmount = housePrice * loanRatio;
            const normalLoanAmount = Math.max(0, totalLoanAmount - 10000000);
            
            if (normalLoanAmount > 0) {
                const normalLoanAmountWan = Math.round(normalLoanAmount / 10000);
                youthRateSetting.innerHTML = `
                    <div style="display: flex; align-items: center; margin-bottom: 0.5rem;">
                        <span style="margin-right: 0.5rem;">💰</span>
                        <strong>超過1000萬部分 (${normalLoanAmountWan}萬元) 一般貸款利率設定</strong>
                    </div>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 0.5rem; align-items: center;">
                        <label style="font-size: 0.8rem;">一般貸款利率：</label>
                        <div style="display: flex; align-items: center; gap: 0.3rem;">
                            <input type="range" id="normalLoanRate" min="2.0" max="4.0" step="0.1" value="2.8" 
                                   style="flex: 1; height: 4px; border-radius: 2px; background: #e0e0e0; outline: none; cursor: pointer;">
                            <span id="normalLoanRateValue" style="font-weight: bold; min-width: 3rem; text-align: center;">2.8%</span>
                        </div>
                    </div>
                    <div style="font-size: 0.75rem; margin-top: 0.3rem; color: #666;">
                        💡 超過1000萬的部分將使用此利率計算
                    </div>
                `;
                youthRateSetting.style.display = 'block';
                
                // 綁定一般貸款利率滑桿事件
                setTimeout(() => {
                    const normalRateSlider = document.getElementById('normalLoanRate');
                    const normalRateValue = document.getElementById('normalLoanRateValue');
                    
                    if (normalRateSlider && normalRateValue) {
                        normalRateSlider.addEventListener('input', function() {
                            normalRateValue.textContent = this.value + '%';
                            calculateModalLoan(); // 重新計算
                        });
                    }
                }, 100);
            } else {
                youthRateSetting.style.display = 'none';
            }
        }
        
        // 綁定輸入框事件
        function bindInputEvents() {
            // 房屋總價
            const housePriceInput = document.getElementById('modalHousePrice');
            if (housePriceInput) {
                housePriceInput.addEventListener('input', function() {
                    calculateModalLoan();
                    // 如果是新青安貸款，重新檢查是否需要顯示一般貸款利率設定
                    if (document.getElementById('modalExistingLoan').value === 'youth') {
                        showYouthLoanNotice();
                    }
                });
                housePriceInput.addEventListener('change', function() {
                    calculateModalLoan();
                    // 如果是新青安貸款，重新檢查是否需要顯示一般貸款利率設定
                    if (document.getElementById('modalExistingLoan').value === 'youth') {
                        showYouthLoanNotice();
                    }
                });
            }
            
            // 寬限期下拉選單
            const gracePeriodSelect = document.getElementById('modalGracePeriod');
            if (gracePeriodSelect) {
                gracePeriodSelect.addEventListener('change', calculateModalLoan);
            }
            
            // 代書費+契稅
            const serviceFeeInput = document.getElementById('modalServiceFee');
            if (serviceFeeInput) {
                serviceFeeInput.addEventListener('input', calculateModalLoan);
                serviceFeeInput.addEventListener('change', calculateModalLoan);
            }
            
            // 代書潤筆費
            const notaryFeeInput = document.getElementById('modalNotaryFee');
            if (notaryFeeInput) {
                notaryFeeInput.addEventListener('input', calculateModalLoan);
                notaryFeeInput.addEventListener('change', calculateModalLoan);
            }
            
            // 仲介費滑桿
            const agentFeeSlider = document.getElementById('modalAgentFee');
            if (agentFeeSlider) {
                agentFeeSlider.addEventListener('input', function() {
                    document.getElementById('modalAgentFeeValue').textContent = this.value + '%';
                    calculateModalLoan(); // 即時計算
                });
                agentFeeSlider.addEventListener('change', function() {
                    document.getElementById('modalAgentFeeValue').textContent = this.value + '%';
                    calculateModalLoan(); // 即時計算
                });
            }
            
            // 還款方式
            const repaymentTypeSelect = document.getElementById('modalRepaymentType');
            if (repaymentTypeSelect) {
                repaymentTypeSelect.addEventListener('change', calculateModalLoan);
            }
            
            // 名下有無其他房貸
            const existingLoanSelect = document.getElementById('modalExistingLoan');
            if (existingLoanSelect) {
                existingLoanSelect.addEventListener('change', adjustLoanConditions);
            }
            
            // 月收入
            const monthlyIncomeInput = document.getElementById('modalMonthlyIncome');
            if (monthlyIncomeInput) {
                monthlyIncomeInput.addEventListener('input', calculateModalLoan);
                monthlyIncomeInput.addEventListener('change', calculateModalLoan);
            }
            
            // 其他月支出
            const otherExpensesInput = document.getElementById('modalOtherExpenses');
            if (otherExpensesInput) {
                otherExpensesInput.addEventListener('input', calculateModalLoan);
                otherExpensesInput.addEventListener('change', calculateModalLoan);
            }
        }
        
        // 貸款試算計算功能
        function calculateModalLoan() {
            const housePrice = parseFloat(document.getElementById('modalHousePrice').value) * 10000;
            const loanRatio = parseFloat(document.getElementById('modalLoanRatio').value) / 100;
            const loanYears = parseInt(document.getElementById('modalLoanYears').value);
            const interestRate = parseFloat(document.getElementById('modalInterestRate').value) / 100;
            const gracePeriod = parseInt(document.getElementById('modalGracePeriod').value) || 0;
            const serviceFee = parseFloat(document.getElementById('modalServiceFee').value) || 0;
            const notaryFee = parseFloat(document.getElementById('modalNotaryFee').value) || 0;
            const agentFeeRate = parseFloat(document.getElementById('modalAgentFee').value) || 0;
            const agentFee = housePrice * (agentFeeRate / 100); // 仲介費按房屋總價百分比計算
            const repaymentType = document.getElementById('modalRepaymentType').value;
            const monthlyIncome = parseFloat(document.getElementById('modalMonthlyIncome').value) * 10000 || 0;
            const otherExpenses = parseFloat(document.getElementById('modalOtherExpenses').value) * 10000 || 0;
            const existingLoan = document.getElementById('modalExistingLoan').value;
            
            if (!housePrice || housePrice <= 0) {
                alert('請輸入有效的房屋價格');
                return;
            }
            
            // 基本計算
            const loanAmount = housePrice * loanRatio;
            const downPayment = housePrice - loanAmount;
            
            // 新青安混合貸款計算
            let youthLoanAmount = 0;
            let normalLoanAmount = 0;
            let youthInterestRate = interestRate;
            let normalInterestRate = interestRate;
            
            if (existingLoan === 'youth') {
                // 新青安：前1000萬享優惠利率，超過部分一般利率
                youthLoanAmount = Math.min(loanAmount, 10000000);
                normalLoanAmount = Math.max(0, loanAmount - 10000000);
                youthInterestRate = 1.8 / 100; // 新青安優惠利率
                
                // 獲取用戶自定義的一般貸款利率
                const normalRateSlider = document.getElementById('normalLoanRate');
                if (normalRateSlider && normalLoanAmount > 0) {
                    normalInterestRate = parseFloat(normalRateSlider.value) / 100;
                } else {
                    normalInterestRate = 2.8 / 100; // 預設一般貸款利率
                }
            }
            
            // 貸款計算（月利率）
            const totalMonths = loanYears * 12;
            const graceMonths = gracePeriod * 12;
            const remainingMonths = totalMonths - graceMonths;
            
            // 計算月付金額
            let monthlyPayment = 0;
            let gracePayment = 0;
            let totalInterest = 0;
            
            if (existingLoan === 'youth' && normalLoanAmount > 0) {
                // 混合貸款：新青安 + 一般貸款
                const youthMonthlyRate = youthInterestRate / 12;
                const normalMonthlyRate = normalInterestRate / 12;
                
                // 寬限期內只付利息
                const youthGracePayment = youthLoanAmount * youthMonthlyRate;
                const normalGracePayment = normalLoanAmount * normalMonthlyRate;
                gracePayment = youthGracePayment + normalGracePayment;
                
                // 寬限期後的正常還款
                if (remainingMonths > 0) {
                    let youthMonthlyPayment = 0;
                    let normalMonthlyPayment = 0;
                    
                    if (repaymentType === 'equal_payment') {
                        // 等額本息公式
                        if (youthLoanAmount > 0) {
                            youthMonthlyPayment = youthLoanAmount * (youthMonthlyRate * Math.pow(1 + youthMonthlyRate, remainingMonths)) / (Math.pow(1 + youthMonthlyRate, remainingMonths) - 1);
                        }
                        if (normalLoanAmount > 0) {
                            normalMonthlyPayment = normalLoanAmount * (normalMonthlyRate * Math.pow(1 + normalMonthlyRate, remainingMonths)) / (Math.pow(1 + normalMonthlyRate, remainingMonths) - 1);
                        }
                    } else {
                        // 等額本金公式（第一個月）
                        if (youthLoanAmount > 0) {
                            const youthMonthlyPrincipal = youthLoanAmount / remainingMonths;
                            youthMonthlyPayment = youthMonthlyPrincipal + youthLoanAmount * youthMonthlyRate;
                        }
                        if (normalLoanAmount > 0) {
                            const normalMonthlyPrincipal = normalLoanAmount / remainingMonths;
                            normalMonthlyPayment = normalMonthlyPrincipal + normalLoanAmount * normalMonthlyRate;
                        }
                    }
                    
                    monthlyPayment = youthMonthlyPayment + normalMonthlyPayment;
                } else {
                    monthlyPayment = gracePayment;
                }
                
                // 正確的總利息計算
                const graceInterest = gracePayment * graceMonths;
                let normalPeriodTotalPayment = 0;
                
                if (repaymentType === 'equal_payment') {
                    // 等額本息：固定月付 × 剩餘月數
                    normalPeriodTotalPayment = monthlyPayment * remainingMonths;
                } else {
                    // 等額本金：逐月計算
                    if (youthLoanAmount > 0) {
                        const youthMonthlyPrincipal = youthLoanAmount / remainingMonths;
                        for (let i = 0; i < remainingMonths; i++) {
                            const youthRemainingPrincipal = youthLoanAmount - (youthMonthlyPrincipal * i);
                            normalPeriodTotalPayment += youthMonthlyPrincipal + (youthRemainingPrincipal * youthMonthlyRate);
                        }
                    }
                    if (normalLoanAmount > 0) {
                        const normalMonthlyPrincipal = normalLoanAmount / remainingMonths;
                        for (let i = 0; i < remainingMonths; i++) {
                            const normalRemainingPrincipal = normalLoanAmount - (normalMonthlyPrincipal * i);
                            normalPeriodTotalPayment += normalMonthlyPrincipal + (normalRemainingPrincipal * normalMonthlyRate);
                        }
                    }
                }
                
                totalInterest = graceInterest + (normalPeriodTotalPayment - loanAmount);
            } else {
                // 單一利率貸款
                const monthlyRate = interestRate / 12;
                
                if (loanAmount > 0 && monthlyRate > 0) {
                    // 寬限期內只付利息
                    gracePayment = loanAmount * monthlyRate;
                    
                    // 寬限期後的正常還款
                    if (remainingMonths > 0) {
                        if (repaymentType === 'equal_payment') {
                            // 等額本息公式
                            monthlyPayment = loanAmount * (monthlyRate * Math.pow(1 + monthlyRate, remainingMonths)) / (Math.pow(1 + monthlyRate, remainingMonths) - 1);
                        } else {
                            // 等額本金公式（第一個月）
                            const monthlyPrincipal = loanAmount / remainingMonths;
                            monthlyPayment = monthlyPrincipal + loanAmount * monthlyRate;
                        }
                    } else {
                        monthlyPayment = gracePayment;
                    }
                    
                    // 正確的總利息計算
                    const graceInterest = gracePayment * graceMonths;
                    let normalPeriodTotalPayment = 0;
                    
                    if (repaymentType === 'equal_payment') {
                        // 等額本息：固定月付 × 剩餘月數
                        normalPeriodTotalPayment = monthlyPayment * remainingMonths;
                    } else {
                        // 等額本金：逐月計算
                        const monthlyPrincipal = loanAmount / remainingMonths;
                        for (let i = 0; i < remainingMonths; i++) {
                            const remainingPrincipal = loanAmount - (monthlyPrincipal * i);
                            normalPeriodTotalPayment += monthlyPrincipal + (remainingPrincipal * monthlyRate);
                        }
                    }
                    
                    totalInterest = graceInterest + (normalPeriodTotalPayment - loanAmount);
                }
            }
            
            
            // 雜項費用計算
            const totalFees = serviceFee + notaryFee + agentFee;
            
            // 總成本計算（包含自備款和雜費）
            const totalCost = downPayment + totalFees;
            
            // 負擔能力分析
            const debtRatio = monthlyPayment / monthlyIncome; // 負債比
            const availableIncome = monthlyIncome - otherExpenses; // 可用收入
            const affordabilityRatio = monthlyPayment / availableIncome; // 房貸負擔比
            const recommendedIncome = monthlyPayment * 3; // 建議月收入（房貸不超過收入1/3）
            const isAffordable = affordabilityRatio <= 0.5; // 是否負擔得起（負擔比不超過50%）
            
            const results = `
                <div style="line-height: 1.3;">
                    <div class="loan-result-card" style="margin-bottom: 0.4rem;">
                        <div class="loan-result-title" style="margin-bottom: 0.4rem; font-size: 0.85rem;">💰 房屋資訊</div>
                        <div class="loan-result-grid" style="gap: 0.2rem; font-size: 0.75rem;">
                            <div>總價：</div><div class="font-semibold">${Math.round(housePrice / 10000)}萬</div>
                            <div>貸款：</div><div class="font-semibold text-blue-600">${Math.round(loanAmount / 10000)}萬${existingLoan === 'youth' && normalLoanAmount > 0 ? ` (新青安${Math.round(youthLoanAmount/10000)}萬@${(youthInterestRate*100).toFixed(1)}%+一般${Math.round(normalLoanAmount/10000)}萬@${(normalInterestRate*100).toFixed(1)}%)` : existingLoan === 'youth' ? ' @1.8%' : ''}</div>
                            <div>成數：</div><div class="font-semibold">${(loanRatio * 100).toFixed(0)}%</div>
                            <div>自備款：</div><div class="font-semibold text-red-600">${Math.round(downPayment / 10000)}萬</div>
                        </div>
                    </div>
                    
                    <div class="loan-result-card" style="margin-bottom: 0.4rem;">
                        <div class="loan-result-title" style="margin-bottom: 0.4rem; font-size: 0.85rem;">🏦 貸款條件</div>
                        <div class="loan-result-grid" style="gap: 0.2rem; font-size: 0.75rem;">
                            <div>年限：</div><div class="font-semibold">${loanYears}年</div>
                            <div>利率：</div><div class="font-semibold">${(interestRate * 100).toFixed(2)}%</div>
                            <div>還款：</div><div class="font-semibold">${repaymentType === 'equal_payment' ? '等額本息' : '等額本金'}</div>
                            <div>寬限期：</div><div class="font-semibold">${gracePeriod > 0 ? (gracePeriod === 5 ? '新青安5年' : `${gracePeriod}年`) : '無'}</div>
                            ${gracePeriod > 0 ? `<div>寬限期月付：</div><div class="font-semibold text-green-600">${Math.round(gracePayment).toLocaleString()}元</div>` : ''}
                            <div>正常期月付：</div><div class="font-semibold text-blue-600">${Math.round(monthlyPayment).toLocaleString()}元</div>
                            <div>總利息：</div><div class="font-semibold text-orange-600">${(totalInterest / 10000).toFixed(1)}萬</div>
                        </div>
                    </div>
                    
                    <div class="loan-result-card" style="margin-bottom: 0.4rem;">
                        <div class="loan-result-title" style="margin-bottom: 0.4rem; font-size: 0.85rem;">📋 雜項費用</div>
                        <div class="loan-result-grid" style="gap: 0.2rem; font-size: 0.75rem;">
                            <div>代書費+契稅：</div><div class="font-semibold">${serviceFee.toLocaleString()}元</div>
                            <div>貸書潤筆費：</div><div class="font-semibold">${notaryFee.toLocaleString()}元</div>
                            <div>仲介費(${agentFeeRate}%)：</div><div class="font-semibold">${Math.round(agentFee).toLocaleString()}元</div>
                            <div class="font-bold">雜費總計：</div><div class="font-bold text-red-600">${totalFees.toLocaleString()}元</div>
                        </div>
                    </div>
                    
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 0.4rem; margin-bottom: 0.4rem;">
                        <div class="loan-result-highlight" style="padding: 0.6rem;">
                            <h3 style="font-size: 0.8rem; margin-bottom: 0.2rem;">🎯 購屋資金需求</h3>
                            <div class="amount" style="font-size: 1.1rem;">${(totalCost / 10000).toFixed(1)}萬</div>
                            <p style="opacity: 0.9; margin-top: 0.2rem; font-size: 0.7rem;">自備款+雜費</p>
                        </div>
                        
                        <div class="loan-result-highlight" style="padding: 0.6rem;">
                            <h3 style="font-size: 0.8rem; margin-bottom: 0.2rem;">💳 每月負擔</h3>
                            <div class="amount" style="font-size: 1.1rem;">${Math.round(monthlyPayment).toLocaleString()}元</div>
                            <p style="opacity: 0.9; margin-top: 0.2rem; font-size: 0.7rem;">${gracePeriod > 0 ? '正常期月付' : '房貸月付'}</p>
                        </div>
                    </div>
                    
                    <div class="loan-result-card" style="margin-bottom: 0.4rem;">
                        <div class="loan-result-title" style="margin-bottom: 0.4rem; font-size: 0.85rem;">📊 負擔能力分析</div>
                        <div class="loan-result-grid" style="gap: 0.2rem; font-size: 0.75rem;">
                            <div>負債比：</div><div class="font-semibold ${debtRatio > 0.3 ? 'text-red-600' : debtRatio > 0.2 ? 'text-orange-600' : 'text-green-600'}">${(debtRatio * 100).toFixed(1)}%</div>
                            <div>房貸負擔比：</div><div class="font-semibold ${affordabilityRatio > 0.5 ? 'text-red-600' : affordabilityRatio > 0.3 ? 'text-orange-600' : 'text-green-600'}">${(affordabilityRatio * 100).toFixed(1)}%</div>
                            <div>建議月收入：</div><div class="font-semibold text-blue-600">${Math.round(recommendedIncome / 10000).toFixed(1)}萬</div>
                            <div>負擔評估：</div><div class="font-semibold ${isAffordable ? 'text-green-600' : 'text-red-600'}">${isAffordable ? '✅ 可負擔' : '⚠️ 負擔過重'}</div>
                        </div>
                    </div>
                    
                </div>
            `;
            
            document.getElementById('modalLoanResults').innerHTML = results;
        }
        
        
        // 急售倒數計時功能
        function updateUrgentCountdown() {
            // 設定截止時間：2025年9月22日 24:00
            const endDate = new Date('2025-09-22T23:59:59');
            const now = new Date();
            const timeDiff = endDate.getTime() - now.getTime();
            
            if (timeDiff <= 0) {
                // 已過期
                document.getElementById('urgentCountdown').textContent = '急售已結束';
                return;
            }
            
            const days = Math.floor(timeDiff / (1000 * 60 * 60 * 24));
            const hours = Math.floor((timeDiff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((timeDiff % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((timeDiff % (1000 * 60)) / 1000);
            
            if (days > 0) {
                // 超過1天，顯示天數
                if (days === 1) {
                    document.getElementById('urgentCountdown').textContent = '急售僅1天';
                } else {
                    document.getElementById('urgentCountdown').textContent = `急售僅${days}天`;
                }
            } else {
                // 1天內，顯示24小時倒數計時
                const timeString = `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                document.getElementById('urgentCountdown').textContent = `急售倒數 ${timeString}`;
            }
        }
        
        // 頁面載入時啟動倒數計時
        document.addEventListener('DOMContentLoaded', function() {
            // 立即更新一次
            updateUrgentCountdown();
            
            // 每秒更新一次
            setInterval(updateUrgentCountdown, 1000);
        });
        
        // 照片燈箱功能
        let currentPhotoIndex = 0;
        let currentPhotoSet = '';
        let photoSets = {
            'property1': {
                images: [
                    { src: 'images/property1/客廳.jpg', title: '客廳' },
                    { src: 'images/property1/廚房.jpg', title: '廚房' },
                    { src: 'images/property1/主臥房視角.jpg', title: '主臥房視角' },
                    { src: 'images/property1/主臥房視角2.jpg', title: '主臥房視角2' },
                    { src: 'images/property1/次臥房.jpg', title: '次臥房' },
                    { src: 'images/property1/次臥房3.jpg', title: '次臥房3' },
                    { src: 'images/property1/次臥房4.jpg', title: '次臥房4' },
                    { src: 'images/property1/衛浴.jpg', title: '衛浴' },
                    { src: 'images/property1/前陽台.jpg', title: '前陽台' },
                    { src: 'images/property1/前陽台景觀.jpg', title: '前陽台景觀' },
                    { src: 'images/property1/後陽台.jpg', title: '後陽台' },
                    { src: 'images/property1/陽台景觀.jpg', title: '陽台景觀' },
                    { src: 'images/property1/格局圖.jpg', title: '格局圖' }
                ]
            },
            'property2': {
                images: [
                    { src: 'images/property2/客廳全景.jpg', title: '客廳全景' },
                    { src: 'images/property2/客廳角度二.jpg', title: '客廳角度二' },
                    { src: 'images/property2/客廳細節.jpg', title: '客廳細節' },
                    { src: 'images/property2/廚房.jpg', title: '廚房' },
                    { src: 'images/property2/主臥室.jpg', title: '主臥室' },
                    { src: 'images/property2/次臥室.jpg', title: '次臥室' },
                    { src: 'images/property2/次臥房3.jpg', title: '次臥房3' },
                    { src: 'images/property2/次臥房4.jpg', title: '次臥房4' },
                    { src: 'images/property2/臥室細節.jpg', title: '臥室細節' },
                    { src: 'images/property2/衛浴開窗.jpg', title: '衛浴開窗' },
                    { src: 'images/property2/主臥衛浴開窗.jpg', title: '主臥衛浴開窗' },
                    { src: 'images/property2/陽台景觀.jpg', title: '陽台景觀' },
                    { src: 'images/property2/後陽台.jpg', title: '後陽台' },
                    { src: 'images/property2/格局圖.jpg', title: '格局圖' }
                ]
            }
        };
        
        function openLightbox(index, photoSet) {
            currentPhotoIndex = index;
            currentPhotoSet = photoSet;
            
            const lightbox = document.getElementById('photoLightbox');
            const mainImage = document.getElementById('lightboxMainImage');
            const title = document.getElementById('lightboxTitle');
            const counter = document.getElementById('lightboxCounter');
            const thumbnails = document.getElementById('lightboxThumbnails');
            
            // 顯示燈箱
            lightbox.style.display = 'block';
            document.body.style.overflow = 'hidden';
            
            // 更新主圖
            const currentPhoto = photoSets[photoSet].images[index];
            mainImage.src = currentPhoto.src;
            mainImage.alt = currentPhoto.title;
            
            // 更新標題和計數器
            title.textContent = currentPhoto.title;
            counter.textContent = `${index + 1} / ${photoSets[photoSet].images.length}`;
            
            // 生成縮圖
            thumbnails.innerHTML = '';
            photoSets[photoSet].images.forEach((photo, i) => {
                const thumbnail = document.createElement('img');
                thumbnail.src = photo.src;
                thumbnail.alt = photo.title;
                thumbnail.className = 'lightbox-thumbnail';
                if (i === index) thumbnail.classList.add('active');
                thumbnail.onclick = () => switchToImage(i);
                thumbnails.appendChild(thumbnail);
            });
            
            // 綁定鍵盤事件
            document.addEventListener('keydown', handleKeyPress);
        }
        
        function closeLightbox() {
            document.getElementById('photoLightbox').style.display = 'none';
            document.body.style.overflow = 'auto';
            document.removeEventListener('keydown', handleKeyPress);
        }
        
        function nextImage() {
            const totalImages = photoSets[currentPhotoSet].images.length;
            currentPhotoIndex = (currentPhotoIndex + 1) % totalImages;
            switchToImage(currentPhotoIndex);
        }
        
        function previousImage() {
            const totalImages = photoSets[currentPhotoSet].images.length;
            currentPhotoIndex = (currentPhotoIndex - 1 + totalImages) % totalImages;
            switchToImage(currentPhotoIndex);
        }
        
        function switchToImage(index) {
            currentPhotoIndex = index;
            const currentPhoto = photoSets[currentPhotoSet].images[index];
            
            // 更新主圖
            document.getElementById('lightboxMainImage').src = currentPhoto.src;
            document.getElementById('lightboxTitle').textContent = currentPhoto.title;
            document.getElementById('lightboxCounter').textContent = `${index + 1} / ${photoSets[currentPhotoSet].images.length}`;
            
            // 更新縮圖活動狀態
            const thumbnails = document.querySelectorAll('.lightbox-thumbnail');
            thumbnails.forEach((thumb, i) => {
                thumb.classList.toggle('active', i === index);
            });
        }
        
        function handleKeyPress(event) {
            switch(event.key) {
                case 'Escape':
                    closeLightbox();
                    break;
                case 'ArrowLeft':
                    previousImage();
                    break;
                case 'ArrowRight':
                    nextImage();
                    break;
            }
        }
        
        // 點擊燈箱背景關閉
        document.getElementById('photoLightbox').addEventListener('click', function(event) {
            if (event.target === this) {
                closeLightbox();
            }
        });
    </script>
</body>
</html>