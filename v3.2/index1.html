<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>楊梅耀新加洲社區 - 急售物件 | 住商不動產</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Microsoft JhengHei', Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            box-shadow: 0 0 30px rgba(0,0,0,0.1);
        }
        
        .header {
            background: linear-gradient(45deg, #2c3e50, #3498db);
            color: white;
            padding: 2rem;
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        
        .header::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="50" cy="50" r="2" fill="rgba(255,255,255,0.1)"/></svg>') repeat;
            animation: float 20s infinite linear;
        }
        
        @keyframes float {
            0% { transform: translateX(-50px) translateY(-50px); }
            100% { transform: translateX(50px) translateY(50px); }
        }
        
        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
            position: relative;
            z-index: 1;
        }
        
        .urgent-banner {
            background: #e74c3c;
            color: white;
            padding: 1rem;
            text-align: center;
            font-weight: bold;
            font-size: 1.2rem;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }
        
        .properties-section {
            padding: 3rem 2rem;
            background: #f8f9fa;
        }
        
        .properties-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(500px, 1fr));
            gap: 2rem;
            margin-top: 2rem;
        }
        
        .property-card {
            background: white;
            border-radius: 15px;
            padding: 2rem;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            border: 3px solid transparent;
            background-clip: padding-box;
        }
        
        .property-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 40px rgba(0,0,0,0.15);
            border-color: #3498db;
        }
        
        .property-title {
            font-size: 1.5rem;
            color: #2c3e50;
            margin-bottom: 1rem;
            border-bottom: 3px solid #3498db;
            padding-bottom: 0.5rem;
        }
        
        .price-highlight {
            font-size: 2rem;
            color: #e74c3c;
            font-weight: bold;
            margin: 1rem 0;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }
        
        .price-highlight span {
            font-size: 2rem;
        }
        
        .original-price {
            text-decoration: line-through;
            color: #7f8c8d;
            font-size: 1.2rem;
        }
        
        .features-list {
            list-style: none;
            margin: 1rem 0;
        }
        
        .features-list li {
            padding: 0.5rem 0;
            border-bottom: 1px solid #ecf0f1;
            position: relative;
            padding-left: 2rem;
        }
        
        .features-list li::before {
            content: '✓';
            position: absolute;
            left: 0;
            color: #27ae60;
            font-weight: bold;
            font-size: 1.2rem;
        }
        
        .loan-info {
            background: linear-gradient(45deg, #27ae60, #2ecc71);
            color: white;
            padding: 1rem;
            border-radius: 10px;
            margin: 1rem 0;
            text-align: center;
        }
        
        .commission-section {
            background: #34495e;
            color: white;
            padding: 2rem;
            text-align: center;
        }
        
        .commission-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
            margin-top: 1rem;
        }
        
        .commission-card {
            background: rgba(255,255,255,0.1);
            padding: 1.5rem;
            border-radius: 10px;
            backdrop-filter: blur(10px);
        }
        
        .info-section {
            padding: 2rem;
            background: white;
        }
        
        .info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin-top: 1rem;
        }
        
        .info-card {
            background: #f8f9fa;
            padding: 1.5rem;
            border-radius: 10px;
            border-left: 5px solid #3498db;
        }
        
        .contact-section {
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            color: white;
            padding: 3rem 2rem;
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        
        .contact-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="20" cy="20" r="1" fill="rgba(255,215,0,0.1)"/><circle cx="80" cy="80" r="1" fill="rgba(255,215,0,0.1)"/><circle cx="60" cy="30" r="1" fill="rgba(255,215,0,0.1)"/></svg>') repeat;
            animation: sparkle 3s infinite linear;
        }
        
        @keyframes sparkle {
            0%, 100% { opacity: 0.3; }
            50% { opacity: 0.7; }
        }
        
        .contact-button {
            background: linear-gradient(45deg, #ffd700, #ffed4e, #ffd700);
            color: #1a1a2e;
            padding: 1rem 2rem;
            border: 2px solid #ffd700;
            border-radius: 25px;
            font-size: 1.2rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
            margin: 0.5rem;
            position: relative;
            overflow: hidden;
            box-shadow: 0 4px 20px rgba(255, 215, 0, 0.3);
        }
        
        .contact-button::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, 
                transparent 30%, 
                rgba(255,255,255,0.5) 50%, 
                transparent 70%);
            transform: rotate(45deg);
            transition: all 0.6s ease;
            opacity: 0;
        }
        
        .contact-button:hover::before {
            opacity: 1;
            animation: shine 1.5s ease-in-out infinite;
        }
        
        @keyframes shine {
            0% { transform: translateX(-100%) translateY(-100%) rotate(45deg); }
            100% { transform: translateX(100%) translateY(100%) rotate(45deg); }
        }
        
        .contact-button:hover {
            transform: scale(1.05);
            box-shadow: 0 8px 30px rgba(255, 215, 0, 0.5);
            background: linear-gradient(45deg, #ffed4e, #ffd700, #ffed4e);
        }
        
        .schedule-table {
            background: white;
            border-radius: 10px;
            overflow: hidden;
            margin: 1rem 0;
        }
        
        .schedule-table table {
            width: 100%;
            border-collapse: collapse;
        }
        
        .schedule-table th,
        .schedule-table td {
            padding: 1rem;
            text-align: center;
            border-bottom: 1px solid #ecf0f1;
        }
        
        .schedule-table th {
            background: #3498db;
            color: white;
        }
        
        /* 貸款計算器彈跳視窗樣式 */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.6);
            backdrop-filter: blur(5px);
            animation: fadeIn 0.3s ease;
        }
        
        .modal.show {
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .modal-content {
            background: white;
            margin: auto;
            padding: 0;
            border: none;
            border-radius: 20px;
            width: 90%;
            max-width: 600px;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            transform: scale(0.8);
            animation: modalSlideIn 0.4s ease forwards;
        }
        
        .modal-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 1.5rem 2rem;
            border-radius: 20px 20px 0 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .modal-header h2 {
            margin: 0;
            font-size: 1.5rem;
        }
        
        .close {
            color: white;
            font-size: 2rem;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.2s ease;
        }
        
        .close:hover {
            transform: scale(1.1);
        }
        
        .modal-body {
            padding: 2rem;
        }
        
        .calculator-form {
            display: grid;
            gap: 1.5rem;
        }
        
        .form-group {
            display: flex;
            flex-direction: column;
        }
        
        .form-group label {
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 0.5rem;
            font-size: 1rem;
        }
        
        .form-group input,
        .form-group select {
            padding: 0.8rem;
            border: 2px solid #ecf0f1;
            border-radius: 10px;
            font-size: 1rem;
            transition: border-color 0.3s ease;
        }
        
        .form-group input:focus,
        .form-group select:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
        }
        
        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
        }
        
        .calculator-button {
            background: linear-gradient(45deg, #27ae60, #2ecc71);
            color: white;
            padding: 1rem 2rem;
            border: none;
            border-radius: 10px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 1rem 0;
        }
        
        .calculator-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(39, 174, 96, 0.3);
        }
        
        .results-section {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 1.5rem;
            margin-top: 1.5rem;
            border-left: 5px solid #27ae60;
        }
        
        .results-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 1rem;
            margin-top: 1rem;
        }
        
        .result-item {
            background: white;
            padding: 1rem;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            min-height: 80px;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }
        
        .result-value {
            font-size: 1.3rem;
            font-weight: bold;
            color: #e74c3c;
            margin-bottom: 0.5rem;
            word-break: break-all;
            line-height: 1.2;
        }
        
        .result-label {
            font-size: 0.9rem;
            color: #7f8c8d;
        }
        
        .loan-calc-button {
            background: linear-gradient(45deg, #3498db, #2980b9);
            color: white;
            padding: 0.8rem 1.5rem;
            border: none;
            border-radius: 25px;
            font-size: 0.9rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 0.5rem 0;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .loan-calc-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.3);
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        @keyframes modalSlideIn {
            to {
                transform: scale(1);
            }
        }
        
        /* 新青安收合樣式 */
        #newGreenHeader:hover {
            background: rgba(39, 174, 96, 0.1);
        }
        
        #newGreenContent {
            transition: all 0.3s ease;
            overflow: hidden;
        }
        
        #newGreenToggle {
            transition: all 0.3s ease;
        }
        
        @media (max-width: 768px) {
            .properties-grid {
                grid-template-columns: 1fr;
            }
            
            .header h1 {
                font-size: 1.8rem;
                line-height: 1.2;
            }
            
            .header p {
                font-size: 0.9rem;
            }
            
            .urgent-banner {
                font-size: 1rem;
                padding: 0.8rem;
            }
            
            .property-card {
                padding: 1.2rem;
                margin-bottom: 1rem;
            }
            
            .property-title {
                font-size: 1.2rem;
                line-height: 1.3;
            }
            
            .price-highlight {
                font-size: 1.1rem;
                line-height: 1.3;
            }
            
            .price-highlight span {
                font-size: 1.1rem !important;
            }
            
            .features-list li {
                font-size: 0.9rem;
                padding: 0.4rem 0;
                padding-left: 1.5rem;
            }
            
            .loan-info {
                font-size: 0.9rem;
                padding: 0.8rem;
            }
            
            .info-grid {
                grid-template-columns: 1fr;
                gap: 1rem;
            }
            
            .info-card {
                padding: 1rem;
            }
            
            .info-card h3 {
                font-size: 1.1rem;
            }
            
            .schedule-table th,
            .schedule-table td {
                padding: 0.6rem;
                font-size: 0.85rem;
            }
            
            .commission-grid {
                grid-template-columns: 1fr;
                gap: 0.8rem;
            }
            
            .commission-card {
                padding: 1rem;
            }
            
            .contact-section {
                padding: 2rem 1rem;
            }
            
            .contact-section h2 {
                font-size: 1.5rem;
            }
            
            .contact-section h3 {
                font-size: 1.2rem;
                margin-top: 1.5rem;
            }
            
            .contact-button {
                font-size: 0.85rem;
                padding: 0.6rem 0.8rem;
                margin: 0.15rem;
                white-space: nowrap;
            }
            
            .contact-section p {
                font-size: 0.9rem !important;
                line-height: 1.4;
            }
            
            .contact-section > div {
                display: flex;
                flex-wrap: wrap;
                justify-content: center;
                gap: 0.4rem;
                margin: 0.5rem 0;
            }
            
            .contact-section .contact-button {
                flex: 1 1 calc(50% - 0.2rem);
                min-width: 140px;
                max-width: 180px;
                text-align: center;
                font-size: 0.8rem;
                padding: 0.6rem 0.5rem;
                line-height: 1.2;
            }
            
            .contact-section > div:last-child {
                margin-top: 1.5rem;
            }
            
            .contact-section > div:last-child > div {
                display: grid;
                grid-template-columns: 1fr 1fr;
                gap: 0.4rem;
                text-align: center;
            }
            
            .contact-section > div:last-child > div > div {
                padding: 0.6rem;
                font-size: 0.9rem;
            }
            
            .contact-section > div:last-child > div > div > div {
                font-size: 1.5rem;
                margin-bottom: 0.2rem;
            }
            
            iframe {
                height: 250px;
                width: 100%;
                max-width: 500px;
            }
            
            .modal-content {
                width: 95%;
                margin: 1rem;
            }
            
            .modal-header {
                padding: 1rem 1.5rem;
            }
            
            .modal-header h2 {
                font-size: 1.3rem;
            }
            
            .modal-body {
                padding: 1.5rem;
            }
            
            .form-row {
                grid-template-columns: 1fr;
                gap: 0.5rem;
            }
            
            .results-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 0.8rem;
            }
            
            .result-item {
                min-height: 70px;
                padding: 0.8rem;
            }
            
            .result-value {
                font-size: 1.1rem;
            }
            
            .result-label {
                font-size: 0.8rem;
            }
            
            #newGreenHeader {
                padding: 0.8rem 1rem;
            }
            
            #newGreenHeader h4 {
                font-size: 1rem;
            }
            
            #newGreenContent {
                padding: 0 1rem 1rem;
            }
            
            #newGreenContent div {
                grid-template-columns: 1fr;
                gap: 0.8rem;
                font-size: 0.85rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header class="header">
            <h1>🏠 楊梅耀新加洲社區</h1>
            <p>專任急售 | 同業合作歡迎 | 火力全開</p>
        </header>
        
        <div class="urgent-banner">
            ⚡ 急售僅2天 | 全區最低價 | 斡旋優先 ⚡
        </div>
        
        <section class="properties-section">
            <h2 style="text-align: center; font-size: 2rem; color: #2c3e50; margin-bottom: 1rem;">兩件鐵炮物件</h2>
            
            <div class="properties-grid">
                <div class="property-card">
                    <h3 class="property-title">🏠 和耀新加州｜4房2廳2衛｜單車位</h3>
                    <div style="background: #f8f9fa; padding: 1rem; border-radius: 10px; margin: 1rem 0; font-size: 0.9rem;">
                        <strong>📍 地址：</strong>楊梅區新農街一段233號<br>
                        <strong>🏢 社區：</strong>全新落成正四房+車位 (和耀新加州)
                    </div>
                    <div class="price-highlight">
                        售價：1,398萬<br>
                        <span style="color: #27ae60;">底價：1,340萬 (含4%)</span>
                    </div>
                    <ul class="features-list">
                        <li>4房2廳2衛格局</li>
                        <li>衛浴雙開窗設計</li>
                        <li>平面單車位</li>
                        <li>總坪數50.29坪 (建物24.91坪 / 土地持分7.89坪)</li>
                        <li>樓層待確認 / 總樓層12樓</li>
                        <li>屋齡不到1年 (2024.12.19完工)</li>
                        <li>大廈管理</li>
                        <li>座南朝北 / 有電梯</li>
                    </ul>
                    <div class="loan-info">
                        💰 可貸款額度：1,150萬 - 1,210萬
                    </div>
                    <button class="loan-calc-button" onclick="openLoanCalculator(1398, '單車位')">
                        💰 貸款試算
                    </button>
                    <div style="background: #e8f5e8; padding: 1rem; border-radius: 10px; margin-top: 1rem;">
                        <h4 style="color: #27ae60; margin-bottom: 0.5rem;">🌟 生活機能</h4>
                        <p style="font-size: 0.9rem; margin: 0;">
                            <strong>學校：</strong>楊明國中、楊明國小、楊梅國小<br>
                            <strong>交通：</strong>台1線、楊梅交流道、五楊交流道、楊梅區免費公車、楊梅火車站<br>
                            <strong>公園：</strong>楊梅市場、頭重溪公園
                        </p>
                    </div>
                </div>
                
                <div class="property-card">
                    <h3 class="property-title">🏠 和耀新加州｜4房2廳2衛｜雙車位</h3>
                    <div style="background: #f8f9fa; padding: 1rem; border-radius: 10px; margin: 1rem 0; font-size: 0.9rem;">
                        <strong>📍 地址：</strong>楊梅區新農街一段233號3樓<br>
                        <strong>🏢 社區：</strong>全新落成正四房+車位 (和耀新加州)
                    </div>
                    <div class="price-highlight">
                        售價：1,568萬<br>
                        <span style="color: #27ae60;">底價：1,480萬 (含4%)</span>
                    </div>
                    <ul class="features-list">
                        <li>4房2廳2衛格局</li>
                        <li>衛浴雙開窗設計</li>
                        <li>平面雙車位</li>
                        <li>總坪數50.29坪 (建物24.91坪 / 土地持分7.89坪)</li>
                        <li>3樓 / 總樓層12樓</li>
                        <li>屋齡不到1年 (2024.12.19完工)</li>
                        <li>大廈管理</li>
                        <li>座南朝北 / 有電梯</li>
                    </ul>
                    <div class="loan-info">
                        💰 可貸款額度：1,184萬 - 1,258萬
                    </div>
                    <button class="loan-calc-button" onclick="openLoanCalculator(1568, '雙車位')">
                        💰 貸款試算
                    </button>
                    <div style="background: #e8f5e8; padding: 1rem; border-radius: 10px; margin-top: 1rem;">
                        <h4 style="color: #27ae60; margin-bottom: 0.5rem;">🌟 生活機能</h4>
                        <p style="font-size: 0.9rem; margin: 0;">
                            <strong>學校：</strong>楊明國中、楊明國小、楊梅國小<br>
                            <strong>交通：</strong>台1線、楊梅交流道、五楊交流道、楊梅區免費公車、楊梅火車站<br>
                            <strong>公園：</strong>楊梅市場、頭重溪公園
                        </p>
                    </div>
                </div>
            </div>
        </section>
        
        <section style="background: #f8f9fa; padding: 2rem; text-align: center;">
            <h2 style="color: #2c3e50; margin-bottom: 1rem;">📍 物件位置</h2>
            <p style="color: #7f8c8d; margin-bottom: 1.5rem;">楊梅區新農街一段233號 - 和耀新加州社區</p>
            <div style="display: flex; justify-content: center; margin: 2rem 0;">
                <iframe src="https://www.google.com/maps/embed?pb=!4v1758340007781!6m8!1m7!1s7w1_fK5tL3RYWBpCpBwAwg!2m2!1d24.91222143626028!2d121.1724532961861!3f327.007695552005!4f17.133051009828563!5f0.7820865974627469" width="600" height="450" style="border:0; border-radius: 15px; box-shadow: 0 10px 30px rgba(0,0,0,0.1);" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
            </div>
        </section>
        
        <section class="commission-section">
            <h2>💼 佣金分配方案</h2>
            <div class="commission-grid">
                <div class="commission-card">
                    <h3>同區域介紹</h3>
                    <p>4/1/5 分配</p>
                    <small>銷售5 | 介紹1 | 原開發4</small>
                </div>
                <div class="commission-card">
                    <h3>介紹兼銷售</h3>
                    <p>6/4 分配</p>
                    <small>更優惠的分配比例</small>
                </div>
                <div class="commission-card">
                    <h3>外線市區外</h3>
                    <p>4/2/4 分配</p>
                    <small>外地同業合作方案</small>
                </div>
            </div>
        </section>
        
        <section class="info-section">
            <h2 style="text-align: center; margin-bottom: 2rem; color: #2c3e50;">📋 重要資訊</h2>
            
            <div class="info-grid">
                <div class="info-card">
                    <h3>🔑 看屋資訊</h3>
                    <p><strong>鑰匙地點：</strong>住商楊梅大順店<br>
                    楊梅區梅獅路二段36號<br>
                    <strong>電子鎖：</strong>166666#<br>
                    <strong>停車：</strong>地下室可直接停車<br>
                    <strong>注意：</strong>17:00後請著便服看屋</p>
                </div>
                
                <div class="info-card">
                    <h3>⏰ 屋主簽約時間</h3>
                    <div class="schedule-table">
                        <table>
                            <tr><th>星期</th><th>時間</th></tr>
                            <tr><td>一、二、四</td><td>17:30後</td></tr>
                            <tr><td>三</td><td>全天</td></tr>
                            <tr><td>六</td><td>下午</td></tr>
                        </table>
                    </div>
                    <p><small>屋主可配合簽約時間</small></p>
                </div>
                
                <div class="info-card">
                    <h3>💡 出售原因 & 重要提醒</h3>
                    <p><strong>出售原因：</strong><br>
                    建商交期延遲，屋主已另購他處定居，現釋出兩間物件。因資金需求，以不虧損為底線急售。</p>
                    
                    <p style="margin-top: 1rem;"><strong>⚠️ 重要提醒：</strong><br>
                    • 斡旋為優先順位<br>
                    • 請審核買方自備條件<br>
                    • 不壓保貸<br>
                    • 賠錢就不賣，有自住買方</p>
                </div>
            </div>
        </section>
        
        <section class="contact-section">
            <h2>📞 立即聯絡</h2>
            <p style="font-size: 1.2rem; margin: 1rem 0;">有錢大家一起賺！火力廣發，搶先成交！</p>
            
            <a href="tel:0928776755" class="contact-button">
                📱 0928-776-755 蔡先生
            </a>
            
            <a href="tel:0925666597" class="contact-button">
                📱 0925-666-597 劉小姐
            </a>
            
            <div style="margin-top: 2rem;">
                <h3>📎 相關資料連結</h3>
                <div style="display: flex; flex-wrap: wrap; justify-content: center; gap: 0.4rem; margin: 0.5rem 0;">
                    <a href="https://reurl.cc/bmbY9v" class="contact-button" target="_blank">物件照片資料</a>
                    <a href="https://reurl.cc/0Wbd1l" class="contact-button" target="_blank">社區報告</a>
                </div>
                <div style="display: flex; flex-wrap: wrap; justify-content: center; gap: 0.4rem; margin: 0.5rem 0;">
                    <a href="https://reurl.cc/Y35qeD" class="contact-button" target="_blank">實價登錄(1398萬)</a>
                    <a href="https://reurl.cc/yAbv7D" class="contact-button" target="_blank">實價登錄(1568萬)</a>
                </div>
                <div style="display: flex; flex-wrap: wrap; justify-content: center; gap: 0.4rem; margin: 0.5rem 0;">
                    <a href="https://reurl.cc/gYb6Db" class="contact-button" target="_blank">楊梅房市概況</a>
                </div>
            </div>
            
            <div style="margin-top: 2rem; padding: 2rem; background: rgba(255,255,255,0.1); border-radius: 15px;">
                <h3 style="text-align: center; margin-bottom: 1.5rem; font-size: 1.3rem;">📋 配案流程</h3>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; text-align: center;">
                    <div style="background: rgba(255,255,255,0.1); padding: 1rem; border-radius: 10px; backdrop-filter: blur(5px);">
                        <div style="font-size: 2rem; margin-bottom: 0.5rem;">1️⃣</div>
                        <strong>填寫配案單</strong><br>
                        <small>兩間地址+名片</small>
                    </div>
                    <div style="background: rgba(255,255,255,0.1); padding: 1rem; border-radius: 10px; backdrop-filter: blur(5px);">
                        <div style="font-size: 2rem; margin-bottom: 0.5rem;">2️⃣</div>
                        <strong>回傳確認</strong><br>
                        <small>等待審核通過</small>
                    </div>
                    <div style="background: rgba(255,255,255,0.1); padding: 1rem; border-radius: 10px; backdrop-filter: blur(5px);">
                        <div style="font-size: 2rem; margin-bottom: 0.5rem;">3️⃣</div>
                        <strong>登記借取鑰匙</strong><br>
                        <small>住商楊梅大順店</small>
                    </div>
                    <div style="background: rgba(255,255,255,0.1); padding: 1rem; border-radius: 10px; backdrop-filter: blur(5px);">
                        <div style="font-size: 2rem; margin-bottom: 0.5rem;">4️⃣</div>
                        <strong>帶看成交</strong><br>
                        <small>火力全開搶先成交</small>
                    </div>
                </div>
            </div>
        </section>
    </div>
    
    <!-- 貸款計算器彈跳視窗 -->
    <div id="loanModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>💰 貸款試算工具</h2>
                <span class="close" onclick="closeLoanCalculator()">&times;</span>
            </div>
            <div class="modal-body">
                <form class="calculator-form" onsubmit="calculateLoan(event)">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="propertyPrice">房屋總價 (萬元)</label>
                            <input type="number" id="propertyPrice" name="propertyPrice" required>
                        </div>
                        <div class="form-group">
                            <label for="loanRate">貸款成數 (%)</label>
                            <select id="loanRate" name="loanRate" required>
                                <option value="75">75% (一般首購)</option>
                                <option value="80">80% (一般住宅)</option>
                                <option value="85">85% (優質客戶)</option>
                                <option value="80">80% (新青安最高)</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="interestRate">年利率 (%)</label>
                            <select id="interestRate" name="interestRate" required>
                                <option value="1.775">1.775% (新青安一段式)</option>
                                <option value="1.565">1.565% (新青安二段式前2年)</option>
                                <option value="1.745">1.745% (新青安混合式第1年)</option>
                                <option value="1.95">1.95% (優質客戶)</option>
                                <option value="2.06">2.06% (一般優惠利率)</option>
                                <option value="2.15">2.15% (一般利率)</option>
                                <option value="2.25">2.25% (較高利率)</option>
                                <option value="2.35">2.35% (高風險利率)</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="loanYears">貸款年期</label>
                            <select id="loanYears" name="loanYears" required>
                                <option value="20">20年</option>
                                <option value="25">25年</option>
                                <option value="30">30年</option>
                                <option value="40">40年 (新青安)</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="gracePeriod">寬限期 (年)</label>
                            <select id="gracePeriod" name="gracePeriod" required>
                                <option value="0">無寬限期</option>
                                <option value="1">1年</option>
                                <option value="2">2年</option>
                                <option value="3">3年</option>
                                <option value="5">5年 (新青安)</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="repaymentType">還款方式</label>
                            <select id="repaymentType" name="repaymentType" required>
                                <option value="principal_interest">本息攤還</option>
                                <option value="principal_only">本金攤還</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="downPayment">自備款 (萬元)</label>
                            <input type="number" id="downPayment" name="downPayment" readonly>
                        </div>
                        <div class="form-group">
                            <label for="loanAmount">貸款金額 (萬元)</label>
                            <input type="number" id="loanAmount" name="loanAmount" readonly>
                        </div>
                    </div>
                    
                    <button type="submit" class="calculator-button">
                        🧮 開始計算
                    </button>
                </form>
                
                <!-- 新青安貸款說明 -->
                <div style="background: linear-gradient(135deg, #e8f5e8 0%, #f0f8f0 100%); border-radius: 15px; margin: 1.5rem 0; border-left: 5px solid #27ae60; overflow: hidden;">
                    <div id="newGreenHeader" style="padding: 1rem 1.5rem; cursor: pointer; display: flex; justify-content: space-between; align-items: center;" onclick="toggleNewGreenInfo()">
                        <h4 style="color: #27ae60; margin: 0; font-size: 1.1rem;">🌱 新青安貸款優惠方案</h4>
                        <span id="newGreenToggle" style="color: #27ae60; font-size: 1.2rem; transition: transform 0.3s ease;">▼</span>
                    </div>
                    <div id="newGreenContent" style="padding: 0 1.5rem 1.5rem; display: none;">
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1rem; font-size: 0.9rem;">
                            <div>
                                <strong>📋 申請條件：</strong><br>
                                • 申請日前6個月起購買住宅<br>
                                • 年齡18歲以上且未滿40歲<br>
                                • 本人、配偶及未成年子女名下無自有住宅<br>
                                • 家庭年收入低於120萬元
                            </div>
                            <div>
                                <strong>💰 優惠內容：</strong><br>
                                • 最高貸款額度：1,000萬元<br>
                                • 最高貸款成數：8成<br>
                                • 最長貸款年限：40年<br>
                                • 最長寬限期：5年<br>
                                • 超低利率：1.775%起
                            </div>
                        </div>
                    </div>
                </div>

                <div id="resultsSection" class="results-section" style="display: none;">
                    <h3 style="color: #27ae60; margin-bottom: 1rem;">📊 計算結果</h3>
                    <div class="results-grid">
                        <div class="result-item">
                            <div class="result-value" id="monthlyPayment">--</div>
                            <div class="result-label">每月還款金額</div>
                        </div>
                        <div class="result-item">
                            <div class="result-value" id="gracePeriodPayment">--</div>
                            <div class="result-label">寬限期月付</div>
                        </div>
                        <div class="result-item">
                            <div class="result-value" id="totalInterest">--</div>
                            <div class="result-label">總利息支出</div>
                        </div>
                        <div class="result-item">
                            <div class="result-value" id="totalPayment">--</div>
                            <div class="result-label">總還款金額</div>
                        </div>
                    </div>
                    
                    <div class="results-grid" style="margin-top: 1rem;">
                        <div class="result-item">
                            <div class="result-value" id="downPaymentAmount">--</div>
                            <div class="result-label">自備款金額</div>
                        </div>
                        <div class="result-item">
                            <div class="result-value" id="displayLoanAmount">--</div>
                            <div class="result-label">貸款金額</div>
                        </div>
                        <div class="result-item">
                            <div class="result-value" id="debtRatio">--</div>
                            <div class="result-label">負債收入比</div>
                        </div>
                        <div class="result-item">
                            <div class="result-value" id="displayInterestRate">--</div>
                            <div class="result-label">年利率</div>
                        </div>
                    </div>
                    
                    <!-- 詳細還款計劃 -->
                    <div style="background: #fff5f5; padding: 1.5rem; border-radius: 15px; margin-top: 1.5rem; border-left: 5px solid #e74c3c;">
                        <h4 style="color: #e74c3c; margin-bottom: 1rem;">📅 還款計劃詳情</h4>
                        <div id="repaymentSchedule" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem;">
                            <!-- 動態生成還款計劃 -->
                        </div>
                    </div>
                    
                    <div style="background: #e8f4fd; padding: 1rem; border-radius: 10px; margin-top: 1rem; border-left: 4px solid #3498db;">
                        <h4 style="color: #2c3e50; margin-bottom: 0.5rem;">💡 貸款建議</h4>
                        <p id="loanAdvice" style="font-size: 0.9rem; margin: 0; color: #34495e;"></p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        // 貸款計算器功能
        function openLoanCalculator(price, propertyType) {
            const modal = document.getElementById('loanModal');
            const propertyPriceInput = document.getElementById('propertyPrice');
            const resultsSection = document.getElementById('resultsSection');
            
            // 設置預設價格
            propertyPriceInput.value = price;
            
            // 隱藏結果區域
            resultsSection.style.display = 'none';
            
            // 顯示彈跳視窗
            modal.classList.add('show');
            
            // 自動計算自備款和貸款金額
            updateLoanAmounts();
            
            // 綁定輸入變化事件
            propertyPriceInput.addEventListener('input', updateLoanAmounts);
            document.getElementById('loanRate').addEventListener('change', updateLoanAmounts);
            document.getElementById('loanYears').addEventListener('change', smartRecommendation);
        }
        
        function closeLoanCalculator() {
            const modal = document.getElementById('loanModal');
            modal.classList.remove('show');
        }
        
        function updateLoanAmounts() {
            const propertyPrice = parseFloat(document.getElementById('propertyPrice').value) || 0;
            const loanRate = parseFloat(document.getElementById('loanRate').value) || 80;
            
            const downPayment = propertyPrice * (100 - loanRate) / 100;
            const loanAmount = propertyPrice * loanRate / 100;
            
            document.getElementById('downPayment').value = Math.round(downPayment);
            document.getElementById('loanAmount').value = Math.round(loanAmount);
        }
        
        function smartRecommendation() {
            const loanYears = parseInt(document.getElementById('loanYears').value);
            const interestRateSelect = document.getElementById('interestRate');
            const loanRateSelect = document.getElementById('loanRate');
            const gracePeriodSelect = document.getElementById('gracePeriod');
            
            // 如果選擇40年貸款，自動推薦新青安選項
            if (loanYears === 40) {
                // 推薦新青安一段式利率
                interestRateSelect.value = '1.775';
                // 推薦新青安最高貸款成數
                loanRateSelect.value = '80';
                // 推薦新青安5年寬限期
                gracePeriodSelect.value = '5';
                
                // 顯示推薦提示
                showRecommendationToast('已自動選擇新青安方案：1.775%利率 + 5年寬限期');
            } else if (loanYears >= 30) {
                // 30年貸款推薦3年寬限期
                gracePeriodSelect.value = '3';
                showRecommendationToast('已推薦3年寬限期，減輕初期負擔');
            } else if (loanYears >= 25) {
                // 25年貸款推薦2年寬限期
                gracePeriodSelect.value = '2';
                showRecommendationToast('已推薦2年寬限期');
            }
        }
        
        function showRecommendationToast(message) {
            // 創建提示框
            const toast = document.createElement('div');
            toast.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: linear-gradient(45deg, #27ae60, #2ecc71);
                color: white;
                padding: 1rem 1.5rem;
                border-radius: 10px;
                box-shadow: 0 5px 15px rgba(0,0,0,0.2);
                z-index: 1001;
                font-weight: bold;
                animation: slideInRight 0.3s ease;
            `;
            toast.textContent = message;
            
            // 添加動畫樣式
            const style = document.createElement('style');
            style.textContent = `
                @keyframes slideInRight {
                    from { transform: translateX(100%); opacity: 0; }
                    to { transform: translateX(0); opacity: 1; }
                }
            `;
            document.head.appendChild(style);
            
            document.body.appendChild(toast);
            
            // 3秒後自動移除
            setTimeout(() => {
                toast.style.animation = 'slideInRight 0.3s ease reverse';
                setTimeout(() => {
                    document.body.removeChild(toast);
                    document.head.removeChild(style);
                }, 300);
            }, 3000);
        }
        
        function calculateLoan(event) {
            event.preventDefault();
            
            const propertyPrice = parseFloat(document.getElementById('propertyPrice').value);
            const loanRate = parseFloat(document.getElementById('loanRate').value);
            const interestRate = parseFloat(document.getElementById('interestRate').value);
            const loanYears = parseInt(document.getElementById('loanYears').value);
            const gracePeriod = parseInt(document.getElementById('gracePeriod').value);
            const repaymentType = document.getElementById('repaymentType').value;
            
            // 調試信息
            console.log('輸入參數:', {
                propertyPrice: propertyPrice,
                loanRate: loanRate,
                interestRate: interestRate,
                loanYears: loanYears,
                gracePeriod: gracePeriod,
                repaymentType: repaymentType
            });
            
            const loanAmount = propertyPrice * loanRate / 100;
            const downPayment = propertyPrice - loanAmount;
            const monthlyRate = interestRate / 100 / 12;
            const totalMonths = loanYears * 12;
            const gracePeriodMonths = gracePeriod * 12;
            const actualRepaymentMonths = totalMonths - gracePeriodMonths;
            
            console.log('計算參數:', {
                loanAmount: loanAmount,
                downPayment: downPayment,
                monthlyRate: monthlyRate,
                totalMonths: totalMonths,
                gracePeriodMonths: gracePeriodMonths,
                actualRepaymentMonths: actualRepaymentMonths
            });
            
            let monthlyPayment = 0;
            let gracePeriodPayment = 0;
            let totalPayment = 0;
            let totalInterest = 0;
            
            if (gracePeriod > 0) {
                // 寬限期內只付利息
                gracePeriodPayment = loanAmount * monthlyRate;
                
                if (repaymentType === 'principal_interest') {
                    // 寬限期後本息攤還
                    monthlyPayment = loanAmount * monthlyRate * Math.pow(1 + monthlyRate, actualRepaymentMonths) / 
                                   (Math.pow(1 + monthlyRate, actualRepaymentMonths) - 1);
                } else {
                    // 寬限期後本金攤還 - 修正計算
                    const principalPayment = loanAmount / actualRepaymentMonths;
                    // 本金攤還第一個月最高，之後遞減
                    monthlyPayment = principalPayment + (loanAmount * monthlyRate);
                }
                
                // 計算總利息
                const gracePeriodInterest = gracePeriodPayment * gracePeriodMonths;
                const repaymentInterest = calculateRepaymentInterest(loanAmount, monthlyRate, actualRepaymentMonths, repaymentType);
                totalInterest = gracePeriodInterest + repaymentInterest;
                
                totalPayment = loanAmount + totalInterest;
                
            } else {
                // 無寬限期
                gracePeriodPayment = 0;
                
                if (repaymentType === 'principal_interest') {
                    // 本息攤還
                    monthlyPayment = loanAmount * monthlyRate * Math.pow(1 + monthlyRate, totalMonths) / 
                                   (Math.pow(1 + monthlyRate, totalMonths) - 1);
                    totalPayment = monthlyPayment * totalMonths;
                    totalInterest = totalPayment - loanAmount;
                } else {
                    // 本金攤還 - 修正計算
                    const principalPayment = loanAmount / totalMonths;
                    monthlyPayment = principalPayment + (loanAmount * monthlyRate);
                    // 本金攤還的總利息需要精確計算
                    totalInterest = calculatePrincipalInterest(loanAmount, monthlyRate, totalMonths);
                    totalPayment = loanAmount + totalInterest;
                }
            }
            
            // 假設月收入計算負債收入比 (一般建議不超過40%)
            const estimatedIncome = monthlyPayment / 0.35; // 假設月付佔收入的35%
            const debtRatio = (monthlyPayment / estimatedIncome * 100).toFixed(1);
            
            // 更新顯示結果 - 使用新的ID
            try {
                // 檢查所有元素是否存在
                const elements = {
                    monthlyPayment: document.getElementById('monthlyPayment'),
                    gracePeriodPayment: document.getElementById('gracePeriodPayment'),
                    totalInterest: document.getElementById('totalInterest'),
                    totalPayment: document.getElementById('totalPayment'),
                    downPaymentAmount: document.getElementById('downPaymentAmount'),
                    displayLoanAmount: document.getElementById('displayLoanAmount'),
                    debtRatio: document.getElementById('debtRatio'),
                    displayInterestRate: document.getElementById('displayInterestRate')
                };
                
                console.log('元素檢查:', elements);
                
                // 月付金額顯示（元）
                if (elements.monthlyPayment) {
                    elements.monthlyPayment.textContent = Math.round(monthlyPayment).toLocaleString() + ' 元';
                    console.log('月付金額已更新:', Math.round(monthlyPayment).toLocaleString() + ' 元');
                } else {
                    console.error('找不到 monthlyPayment 元素');
                }
                
                if (elements.gracePeriodPayment) {
                    elements.gracePeriodPayment.textContent = gracePeriod > 0 ? Math.round(gracePeriodPayment).toLocaleString() + ' 元' : '--';
                }
                
                // 萬元金額顯示
                if (elements.totalInterest) {
                    elements.totalInterest.textContent = Math.round(totalInterest / 10000).toLocaleString() + ' 萬元';
                }
                
                if (elements.totalPayment) {
                    elements.totalPayment.textContent = Math.round(totalPayment / 10000).toLocaleString() + ' 萬元';
                }
                
                if (elements.downPaymentAmount) {
                    elements.downPaymentAmount.textContent = Math.round(downPayment / 10000).toLocaleString() + ' 萬元';
                }
                
                if (elements.displayLoanAmount) {
                    elements.displayLoanAmount.textContent = Math.round(loanAmount / 10000).toLocaleString() + ' 萬元';
                }
                
                // 百分比顯示
                if (elements.debtRatio) {
                    elements.debtRatio.textContent = debtRatio + '%';
                }
                
                if (elements.displayInterestRate) {
                    elements.displayInterestRate.textContent = interestRate.toFixed(2) + '%';
                }
                
                console.log('最終計算結果:', {
                    monthlyPayment: monthlyPayment,
                    totalInterest: totalInterest,
                    totalPayment: totalPayment,
                    loanAmount: loanAmount,
                    downPayment: downPayment,
                    gracePeriodPayment: gracePeriodPayment
                });
            } catch (error) {
                console.error('更新顯示結果時發生錯誤:', error);
            }
            
            // 生成詳細還款計劃
            generateRepaymentSchedule(loanAmount, monthlyRate, gracePeriodMonths, actualRepaymentMonths, repaymentType);
            
            // 生成貸款建議
            generateLoanAdvice(monthlyPayment, totalInterest, debtRatio, loanAmount, gracePeriod, repaymentType);
            
            // 顯示結果區域
            const resultsSection = document.getElementById('resultsSection');
            if (resultsSection) {
                resultsSection.style.display = 'block';
                console.log('結果區域已顯示');
                
                // 滾動到結果區域
                resultsSection.scrollIntoView({ behavior: 'smooth' });
            } else {
                console.error('找不到 resultsSection 元素');
            }
        }
        
        function formatCurrency(amount, showUnit = false) {
            if (isNaN(amount) || amount === null || amount === undefined) {
                return '0';
            }
            
            if (amount >= 10000) {
                // 萬元以上的數字，顯示為萬
                const result = (Math.round(amount / 10000 * 100) / 100).toLocaleString();
                return showUnit ? result + ' 萬' : result;
            } else {
                // 萬元以下的數字，顯示千分位
                return Math.round(amount).toLocaleString();
            }
        }
        
        function generateRepaymentSchedule(loanAmount, monthlyRate, gracePeriodMonths, actualRepaymentMonths, repaymentType) {
            const scheduleElement = document.getElementById('repaymentSchedule');
            let scheduleHTML = '';
            
            // 寬限期階段
            if (gracePeriodMonths > 0) {
                const gracePeriodPayment = loanAmount * monthlyRate;
                    scheduleHTML += `
                        <div style="background: #e8f5e8; padding: 1rem; border-radius: 10px; text-align: center;">
                            <h5 style="color: #27ae60; margin: 0 0 0.5rem 0;">寬限期 ${gracePeriodMonths} 個月</h5>
                            <div style="font-size: 1.2rem; font-weight: bold; color: #27ae60;">
                                ${Math.round(gracePeriodPayment).toLocaleString()} 元/月
                            </div>
                            <div style="font-size: 0.9rem; color: #7f8c8d; margin-top: 0.5rem;">
                                只付利息
                            </div>
                        </div>
                    `;
            }
            
            // 正式還款階段
            if (actualRepaymentMonths > 0) {
                let repaymentPayment;
                if (repaymentType === 'principal_interest') {
                    // 本息攤還
                    repaymentPayment = loanAmount * monthlyRate * Math.pow(1 + monthlyRate, actualRepaymentMonths) / 
                                     (Math.pow(1 + monthlyRate, actualRepaymentMonths) - 1);
                    scheduleHTML += `
                        <div style="background: #fff3cd; padding: 1rem; border-radius: 10px; text-align: center;">
                            <h5 style="color: #856404; margin: 0 0 0.5rem 0;">正式還款 ${actualRepaymentMonths} 個月</h5>
                            <div style="font-size: 1.2rem; font-weight: bold; color: #856404;">
                                ${Math.round(repaymentPayment).toLocaleString()} 元/月
                            </div>
                            <div style="font-size: 0.9rem; color: #7f8c8d; margin-top: 0.5rem;">
                                本息攤還 (固定)
                            </div>
                        </div>
                    `;
                } else {
                    // 本金攤還 - 顯示第一個月和最後一個月
                    const principalPayment = loanAmount / actualRepaymentMonths;
                    const firstMonthPayment = principalPayment + (loanAmount * monthlyRate);
                    const lastMonthPayment = principalPayment + (principalPayment * monthlyRate);
                    
                    scheduleHTML += `
                        <div style="background: #fff3cd; padding: 1rem; border-radius: 10px; text-align: center;">
                            <h5 style="color: #856404; margin: 0 0 0.5rem 0;">正式還款 ${actualRepaymentMonths} 個月</h5>
                            <div style="font-size: 1rem; font-weight: bold; color: #856404;">
                                首月: ${Math.round(firstMonthPayment).toLocaleString()} 元<br>
                                末月: ${Math.round(lastMonthPayment).toLocaleString()} 元
                            </div>
                            <div style="font-size: 0.9rem; color: #7f8c8d; margin-top: 0.5rem;">
                                本金攤還 (遞減)
                            </div>
                        </div>
                    `;
                }
            }
            
            // 總覽
            const totalMonths = gracePeriodMonths + actualRepaymentMonths;
            scheduleHTML += `
                <div style="background: #f8f9fa; padding: 1rem; border-radius: 10px; text-align: center; border: 2px solid #6c757d;">
                    <h5 style="color: #495057; margin: 0 0 0.5rem 0;">貸款總覽</h5>
                    <div style="font-size: 1rem; color: #495057;">
                        總期數: ${totalMonths} 個月<br>
                        貸款金額: ${Math.round(loanAmount / 10000).toLocaleString()} 萬元
                    </div>
                </div>
            `;
            
            scheduleElement.innerHTML = scheduleHTML;
        }
        
        function calculatePrincipalInterest(principal, monthlyRate, months) {
            let totalInterest = 0;
            let remainingPrincipal = principal;
            const monthlyPrincipal = principal / months;
            
            for (let i = 0; i < months; i++) {
                const monthlyInterest = remainingPrincipal * monthlyRate;
                totalInterest += monthlyInterest;
                remainingPrincipal -= monthlyPrincipal;
            }
            
            return totalInterest;
        }
        
        function calculateRepaymentInterest(principal, monthlyRate, months, repaymentType) {
            if (repaymentType === 'principal_interest') {
                // 本息攤還的總利息
                const monthlyPayment = principal * monthlyRate * Math.pow(1 + monthlyRate, months) / 
                                     (Math.pow(1 + monthlyRate, months) - 1);
                return (monthlyPayment * months) - principal;
            } else {
                // 本金攤還的總利息 - 使用新的精確計算函數
                return calculatePrincipalInterest(principal, monthlyRate, months);
            }
        }
        
        function generateLoanAdvice(monthlyPayment, totalInterest, debtRatio, loanAmount, gracePeriod = 0, repaymentType = 'principal_interest') {
            const adviceElement = document.getElementById('loanAdvice');
            const loanYears = parseInt(document.getElementById('loanYears').value);
            const interestRate = parseFloat(document.getElementById('interestRate').value);
            const loanRate = parseFloat(document.getElementById('loanRate').value);
            
            let advice = '';
            
            // 檢查是否為新青安貸款
            const isNewGreenLoan = loanYears === 40 && interestRate <= 1.775;
            
            if (isNewGreenLoan) {
                advice += '🌱 <strong>新青安貸款優勢：</strong><br>';
                advice += '✅ 超低利率1.775%，大幅降低購屋負擔<br>';
                advice += '✅ 40年貸款期，月付金額更輕鬆<br>';
                advice += '✅ 最高1000萬額度，首購族首選<br>';
                if (gracePeriod > 0) {
                    advice += '✅ 最長5年寬限期，初期負擔更輕<br>';
                }
                advice += '<br>';
            }
            
            // 寬限期建議
            if (gracePeriod > 0) {
                advice += '⏰ <strong>寬限期優勢：</strong><br>';
                advice += '✅ 初期只付利息，現金流壓力較小<br>';
                advice += '⚠️ 寬限期後月付金額會增加，需提前準備<br>';
                advice += '💡 適合收入預期成長的購屋者<br><br>';
            }
            
            // 還款方式建議
            if (repaymentType === 'principal_interest') {
                advice += '📊 <strong>本息攤還：</strong><br>';
                advice += '✅ 月付金額固定，便於財務規劃<br>';
                advice += '✅ 初期負擔較本金攤還輕<br><br>';
            } else {
                advice += '📊 <strong>本金攤還：</strong><br>';
                advice += '✅ 總利息支出較少<br>';
                advice += '⚠️ 初期月付金額較高<br>';
                advice += '💡 適合收入穩定且較高的購屋者<br><br>';
            }
            
            // 貸款成數建議
            if (loanRate <= 75) {
                advice += '✅ 貸款成數75%，自備款充足，審核通過率高<br>';
            } else if (loanRate <= 80) {
                advice += '✅ 貸款成數80%，一般住宅標準，條件良好<br>';
            } else {
                advice += '⚠️ 貸款成數85%，需提供完整財力證明<br>';
            }
            
            // 根據月付金額給建議
            if (monthlyPayment < 30000) {
                advice += '✅ 月付金額合理，負擔較輕。<br>';
            } else if (monthlyPayment < 50000) {
                advice += '⚠️ 月付金額中等，建議確認收入穩定性。<br>';
            } else {
                advice += '🔴 月付金額較高，建議詳細評估財務狀況。<br>';
            }
            
            // 根據負債收入比給建議
            if (debtRatio < 30) {
                advice += '✅ 負債收入比良好，貸款條件佳。<br>';
            } else if (debtRatio < 40) {
                advice += '⚠️ 負債收入比接近警戒線，建議謹慎評估。<br>';
            } else {
                advice += '🔴 負債收入比過高，建議增加自備款或延長貸款期限。<br>';
            }
            
            // 根據貸款金額給建議
            if (loanAmount < 800) {
                advice += '✅ 貸款金額適中，銀行審核通過率較高。<br>';
            } else if (loanAmount < 1200) {
                advice += '⚠️ 貸款金額較大，建議提供完整財力證明。<br>';
            } else {
                advice += '🔴 貸款金額很大，建議多準備財力證明或擔保品。<br>';
            }
            
            // 新青安特殊提醒
            if (isNewGreenLoan) {
                advice += '<br>🌱 <strong>新青安申請提醒：</strong><br>';
                advice += '• 需符合年齡限制(18-40歲)和首購條件<br>';
                advice += '• 家庭年收入需低於120萬元<br>';
                advice += '• 申請日前6個月起購買住宅<br>';
            }
            
            advice += '<br>💡 <strong>貼心提醒：</strong>以上為估算值，實際貸款條件以銀行審核為準。';
            
            adviceElement.innerHTML = advice;
        }
        
        // 點擊彈跳視窗外部關閉
        window.onclick = function(event) {
            const modal = document.getElementById('loanModal');
            if (event.target === modal) {
                closeLoanCalculator();
            }
        }
        
        // ESC鍵關閉彈跳視窗
        document.addEventListener('keydown', function(event) {
            if (event.key === 'Escape') {
                closeLoanCalculator();
            }
        });
        
        // 新青安資訊收合功能
        function toggleNewGreenInfo() {
            const content = document.getElementById('newGreenContent');
            const toggle = document.getElementById('newGreenToggle');
            
            if (content.style.display === 'none') {
                content.style.display = 'block';
                toggle.style.transform = 'rotate(180deg)';
                toggle.textContent = '▲';
            } else {
                content.style.display = 'none';
                toggle.style.transform = 'rotate(0deg)';
                toggle.textContent = '▼';
            }
        }

        // 添加一些互動效果
        document.addEventListener('DOMContentLoaded', function() {
            // 滾動動畫效果
            const cards = document.querySelectorAll('.property-card, .info-card');
            
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.style.opacity = '1';
                        entry.target.style.transform = 'translateY(0)';
                    }
                });
            });
            
            cards.forEach(card => {
                card.style.opacity = '0';
                card.style.transform = 'translateY(30px)';
                card.style.transition = 'opacity 0.6s ease, transform 0.6s ease';
                observer.observe(card);
            });
            
            // 點擊按鈕效果
            const buttons = document.querySelectorAll('.contact-button, .loan-calc-button');
            buttons.forEach(button => {
                button.addEventListener('click', function() {
                    this.style.transform = 'scale(0.95)';
                    setTimeout(() => {
                        this.style.transform = 'scale(1.05)';
                    }, 100);
                });
            });
        });
    </script>
</body>
</html>